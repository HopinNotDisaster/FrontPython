
<!DOCTYPE html>

<html lang="zh_Hans">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>地理数据库函数 &#8212; Django 5.0.4.dev20240329153429 文档</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/default.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../search.html" />
    <link rel="next" title="测量对象" href="measure.html" />
    <link rel="prev" title="GIS QuerySet API 参考" href="geoquerysets.html" />



 
<script src="../../../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../../templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../../../index.html">Django 5.0.4.dev20240329153429 文档</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../../index.html">Home</a>  |
        <a title="Table of contents" href="../../../contents.html">Table of contents</a>  |
        <a title="Global index" href="../../../genindex.html">Index</a>  |
        <a title="Module index" href="../../../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="geoquerysets.html" title="GIS QuerySet API 参考">previous</a>
     |
    <a href="../../index.html" title="API 参考" accesskey="U">up</a>
   |
    <a href="measure.html" title="测量对象">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="ref-contrib-gis-functions">
            
  <div class="section" id="s-module-django.contrib.gis.db.models.functions">
<span id="s-geographic-database-functions"></span><span id="module-django.contrib.gis.db.models.functions"></span><span id="geographic-database-functions"></span><h1>地理数据库函数<a class="headerlink" href="#module-django.contrib.gis.db.models.functions" title="永久链接至标题">¶</a></h1>
<p>本页所描述的函数允许用户访问地理数据库函数，以便在 Django 中使用注释、聚合或过滤器。</p>
<p>例如：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.contrib.gis.db.models.functions</span> <span class="kn">import</span> <span class="n">Length</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Track</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="n">Length</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">length__gt</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p>并非所有的后端都支持所有的函数，所以请参考每个函数的文档，看看你的数据库后端是否支持你要使用的函数。如果你在一个不支持地理函数的后台调用该函数，你会得到一个 <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> 异常。</p>
<p>函数的摘要：</p>
<table class="docutils">
<colgroup>
<col width="16%" />
<col width="16%" />
<col width="14%" />
<col width="15%" />
<col width="12%" />
<col width="12%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">测量</th>
<th class="head">关系映射</th>
<th class="head">操作</th>
<th class="head">编辑器</th>
<th class="head">输入格式：</th>
<th class="head">输出格式</th>
<th class="head">杂项</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Area" title="django.contrib.gis.db.models.functions.Area"><code class="xref py py-class docutils literal notranslate"><span class="pre">Area</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Azimuth" title="django.contrib.gis.db.models.functions.Azimuth"><code class="xref py py-class docutils literal notranslate"><span class="pre">Azimuth</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Difference" title="django.contrib.gis.db.models.functions.Difference"><code class="xref py py-class docutils literal notranslate"><span class="pre">Difference</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.ForcePolygonCW" title="django.contrib.gis.db.models.functions.ForcePolygonCW"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForcePolygonCW</span></code></a></td>
<td>&#160;</td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.AsGeoJSON" title="django.contrib.gis.db.models.functions.AsGeoJSON"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsGeoJSON</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.IsEmpty" title="django.contrib.gis.db.models.functions.IsEmpty"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsEmpty</span></code></a></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Distance" title="django.contrib.gis.db.models.functions.Distance"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distance</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.BoundingCircle" title="django.contrib.gis.db.models.functions.BoundingCircle"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoundingCircle</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Intersection" title="django.contrib.gis.db.models.functions.Intersection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Intersection</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.MakeValid" title="django.contrib.gis.db.models.functions.MakeValid"><code class="xref py py-class docutils literal notranslate"><span class="pre">MakeValid</span></code></a></td>
<td>&#160;</td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.AsGML" title="django.contrib.gis.db.models.functions.AsGML"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsGML</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.IsValid" title="django.contrib.gis.db.models.functions.IsValid"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsValid</span></code></a></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#django.contrib.gis.db.models.functions.GeometryDistance" title="django.contrib.gis.db.models.functions.GeometryDistance"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeometryDistance</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Centroid" title="django.contrib.gis.db.models.functions.Centroid"><code class="xref py py-class docutils literal notranslate"><span class="pre">Centroid</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.SymDifference" title="django.contrib.gis.db.models.functions.SymDifference"><code class="xref py py-class docutils literal notranslate"><span class="pre">SymDifference</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Reverse" title="django.contrib.gis.db.models.functions.Reverse"><code class="xref py py-class docutils literal notranslate"><span class="pre">Reverse</span></code></a></td>
<td>&#160;</td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.AsKML" title="django.contrib.gis.db.models.functions.AsKML"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsKML</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.MemSize" title="django.contrib.gis.db.models.functions.MemSize"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemSize</span></code></a></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Length" title="django.contrib.gis.db.models.functions.Length"><code class="xref py py-class docutils literal notranslate"><span class="pre">Length</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.ClosestPoint" title="django.contrib.gis.db.models.functions.ClosestPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClosestPoint</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Union" title="django.contrib.gis.db.models.functions.Union"><code class="xref py py-class docutils literal notranslate"><span class="pre">Union</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Scale" title="django.contrib.gis.db.models.functions.Scale"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scale</span></code></a></td>
<td>&#160;</td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.AsSVG" title="django.contrib.gis.db.models.functions.AsSVG"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsSVG</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.NumGeometries" title="django.contrib.gis.db.models.functions.NumGeometries"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumGeometries</span></code></a></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Perimeter" title="django.contrib.gis.db.models.functions.Perimeter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Perimeter</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Envelope" title="django.contrib.gis.db.models.functions.Envelope"><code class="xref py py-class docutils literal notranslate"><span class="pre">Envelope</span></code></a>
<a class="reference internal" href="#django.contrib.gis.db.models.functions.LineLocatePoint" title="django.contrib.gis.db.models.functions.LineLocatePoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">LineLocatePoint</span></code></a>
<a class="reference internal" href="#django.contrib.gis.db.models.functions.PointOnSurface" title="django.contrib.gis.db.models.functions.PointOnSurface"><code class="xref py py-class docutils literal notranslate"><span class="pre">PointOnSurface</span></code></a></td>
<td>&#160;</td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.SnapToGrid" title="django.contrib.gis.db.models.functions.SnapToGrid"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnapToGrid</span></code></a>
<a class="reference internal" href="#django.contrib.gis.db.models.functions.Transform" title="django.contrib.gis.db.models.functions.Transform"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transform</span></code></a>
<a class="reference internal" href="#django.contrib.gis.db.models.functions.Translate" title="django.contrib.gis.db.models.functions.Translate"><code class="xref py py-class docutils literal notranslate"><span class="pre">Translate</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.FromWKB" title="django.contrib.gis.db.models.functions.FromWKB"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromWKB</span></code></a>
<a class="reference internal" href="#django.contrib.gis.db.models.functions.FromWKT" title="django.contrib.gis.db.models.functions.FromWKT"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromWKT</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.AsWKB" title="django.contrib.gis.db.models.functions.AsWKB"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsWKB</span></code></a>
<a class="reference internal" href="#django.contrib.gis.db.models.functions.AsWKT" title="django.contrib.gis.db.models.functions.AsWKT"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsWKT</span></code></a>
<a class="reference internal" href="#django.contrib.gis.db.models.functions.GeoHash" title="django.contrib.gis.db.models.functions.GeoHash"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeoHash</span></code></a></td>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.NumPoints" title="django.contrib.gis.db.models.functions.NumPoints"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumPoints</span></code></a></td>
</tr>
</tbody>
</table>
<div class="section" id="s-area">
<span id="area"></span><h2><code class="docutils literal notranslate"><span class="pre">Area</span></code><a class="headerlink" href="#area" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.Area">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Area</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.Area" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>：MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-polygon-property-functions.html#function_st-area">MySQL</a>, Oracle, <a class="reference external" href="https://postgis.net/docs/ST_Area.html">PostGIS</a>, SpatiaLite</p>
<p>接受单个地理字段或表达式，并将字段的面积作为一个 <a class="reference internal" href="measure.html#django.contrib.gis.measure.Area" title="django.contrib.gis.measure.Area"><code class="xref py py-class docutils literal notranslate"><span class="pre">Area</span></code></a> 测量返回。</p>
<p>在没有 LWGEOM/RTTOPO 支持的情况下，MySQL 和 SpatiaLite 不支持对地理 SRS（空间参考系统）进行面积计算。</p>
</div>
<div class="section" id="s-asgeojson">
<span id="asgeojson"></span><h2><code class="docutils literal notranslate"><span class="pre">AsGeoJSON</span></code><a class="headerlink" href="#asgeojson" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.AsGeoJSON">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">AsGeoJSON</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="n"><span class="pre">bbox</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em><span class="n"><span class="pre">crs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em><span class="n"><span class="pre">precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.AsGeoJSON" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>：MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/spatial-geojson-functions.html#function_st-asgeojson">MySQL</a>, Oracle, <a class="reference external" href="https://postgis.net/docs/ST_AsGeoJSON.html">PostGIS</a>, SpatiaLite</p>
<p>接受单个地理字段或表达式，并返回几何形状的 <a class="reference external" href="https://geojson.org/">GeoJSON</a> 表示。请注意，结果不是完整的 GeoJSON 结构，而只是 GeoJSON 结构中 <code class="docutils literal notranslate"><span class="pre">geometry</span></code> 键的内容。另请参阅 <a class="reference internal" href="serializers.html"><span class="doc">GeoJSON 序列化器</span></a>。</p>
<p>例如：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">City</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">json</span><span class="o">=</span><span class="n">AsGeoJSON</span><span class="p">(</span><span class="s2">&quot;point&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Chicago&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span>
<span class="go">{&quot;type&quot;:&quot;Point&quot;,&quot;coordinates&quot;:[-87.65018,41.85039]}</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">关键字参数</th>
<th class="head">描述</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">bbox</span></code></td>
<td>如果希望包含返回的 GeoJSON 中的边界框，请将其设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code>。在 Oracle 中会被忽略。</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">crs</span></code></td>
<td>如果希望在返回的 GeoJSON 中包含坐标参考系统，请将其设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code>。在 MySQL 和 Oracle 中会被忽略。</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">precision</span></code></td>
<td>可以用来指定 GeoJSON 表示中坐标的有效数字位数，其默认值为 8。在 Oracle 中会被忽略。</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-asgml">
<span id="asgml"></span><h2><code class="docutils literal notranslate"><span class="pre">AsGML</span></code><a class="headerlink" href="#asgml" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.AsGML">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">AsGML</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em><span class="n"><span class="pre">precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.AsGML" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>：Oracle, <a class="reference external" href="https://postgis.net/docs/ST_AsGML.html">PostGIS</a>, SpatiaLite</p>
<p>接受单个地理字段或表达式，并返回几何形状的 <a class="reference external" href="https://en.wikipedia.org/wiki/Geography_Markup_Language">Geographic Markup Language (GML)</a> 表示。</p>
<p>例如：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">qs</span> <span class="o">=</span> <span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">gml</span><span class="o">=</span><span class="n">AsGML</span><span class="p">(</span><span class="s2">&quot;poly&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">qs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">gml</span><span class="p">)</span>
<span class="go">&lt;gml:Polygon srsName=&quot;EPSG:4326&quot;&gt;&lt;gml:OuterBoundaryIs&gt;-147.78711,70.245363 ...</span>
<span class="go">-147.78711,70.245363&lt;/gml:OuterBoundaryIs&gt;&lt;/gml:Polygon&gt;</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">关键字参数</th>
<th class="head">描述</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">precision</span></code></td>
<td>指定在 GML 表示中坐标的有效数字位数，默认值为 8。在 Oracle 中会被忽略。</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">version</span></code></td>
<td>指定要使用的 GML 版本：2（默认）或 3。</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-askml">
<span id="askml"></span><h2><code class="docutils literal notranslate"><span class="pre">AsKML</span></code><a class="headerlink" href="#askml" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.AsKML">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">AsKML</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="n"><span class="pre">precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.AsKML" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>：<a class="reference external" href="https://postgis.net/docs/ST_AsKML.html">PostGIS</a>, SpatiaLite</p>
<p>接受单个地理字段或表达式，并返回几何形状的 <a class="reference external" href="https://developers.google.com/kml/documentation/">Keyhole Markup Language (KML)</a> 表示。</p>
<p>例如：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">qs</span> <span class="o">=</span> <span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">kml</span><span class="o">=</span><span class="n">AsKML</span><span class="p">(</span><span class="s2">&quot;poly&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">qs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">kml</span><span class="p">)</span>
<span class="go">&lt;Polygon&gt;&lt;outerBoundaryIs&gt;&lt;LinearRing&gt;&lt;coordinates&gt;-103.04135,36.217596,0 ...</span>
<span class="go">-103.04135,36.217596,0&lt;/coordinates&gt;&lt;/LinearRing&gt;&lt;/outerBoundaryIs&gt;&lt;/Polygon&gt;</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">关键字参数</th>
<th class="head">描述</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">precision</span></code></td>
<td>可以使用此关键字来指定 KML 表示中坐标的有效数字位数，其默认值为 8。</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-assvg">
<span id="assvg"></span><h2><code class="docutils literal notranslate"><span class="pre">AsSVG</span></code><a class="headerlink" href="#assvg" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.AsSVG">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">AsSVG</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="n"><span class="pre">relative</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em><span class="n"><span class="pre">precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.AsSVG" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>：<a class="reference external" href="https://postgis.net/docs/ST_AsSVG.html">PostGIS</a>, SpatiaLite</p>
<p>接受单个地理字段或表达式，并返回几何形状的 <a class="reference external" href="https://www.w3.org/Graphics/SVG/">Scalable Vector Graphics (SVG)</a> 表示。</p>
<table class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">关键字参数</th>
<th class="head">描述</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">relative</span></code></td>
<td>如果设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，路径数据将以相对移动的方式实现。默认为 <code class="docutils literal notranslate"><span class="pre">False</span></code>，表示使用绝对移动。</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">precision</span></code></td>
<td>可以使用此关键字来指定 SVG 表示中坐标的有效数字位数，其默认值为 8。</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-aswkb">
<span id="aswkb"></span><h2><code class="docutils literal notranslate"><span class="pre">AsWKB</span></code><a class="headerlink" href="#aswkb" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.AsWKB">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">AsWKB</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.AsWKB" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>：MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-format-conversion-functions.html#function_st-asbinary">MySQL</a>, Oracle, <a class="reference external" href="https://postgis.net/docs/ST_AsBinary.html">PostGIS</a>, SpatiaLite</p>
<p>接受单个地理字段或表达式，并返回几何形状的 <a class="reference external" href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry#Well-known_binary">Well-known binary (WKB)</a> 表示。</p>
<p>例如：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">bytes</span><span class="p">(</span><span class="n">City</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">wkb</span><span class="o">=</span><span class="n">AsWKB</span><span class="p">(</span><span class="s2">&quot;point&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Chelyabinsk&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">wkb</span><span class="p">)</span>
<span class="go">b&#39;\x01\x01\x00\x00\x00]3\xf9f\x9b\x91K@\x00X\x1d9\xd2\xb9N@&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="s-aswkt">
<span id="aswkt"></span><h2><code class="docutils literal notranslate"><span class="pre">AsWKT</span></code><a class="headerlink" href="#aswkt" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.AsWKT">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">AsWKT</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.AsWKT" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>：MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-format-conversion-functions.html#function_st-astext">MySQL</a>, Oracle, <a class="reference external" href="https://postgis.net/docs/ST_AsText.html">PostGIS</a>, SpatiaLite</p>
<p>接受单个地理字段或表达式，并返回几何形状的 <a class="reference external" href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry">Well-known text (WKT)</a> 表示。</p>
<p>例如：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">City</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">wkt</span><span class="o">=</span><span class="n">AsWKT</span><span class="p">(</span><span class="s2">&quot;point&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Chelyabinsk&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;POINT (55.137555 61.451728)&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="s-azimuth">
<span id="azimuth"></span><h2><code class="docutils literal notranslate"><span class="pre">Azimuth</span></code><a class="headerlink" href="#azimuth" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.Azimuth">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Azimuth</span></code>(<em><span class="n"><span class="pre">point_a</span></span></em>, <em><span class="n"><span class="pre">point_b</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.Azimuth" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>：<a class="reference external" href="https://postgis.net/docs/ST_Azimuth.html">PostGIS</a>, SpatiaLite (LWGEOM/RTTOPO)</p>
<p>返回由给定点几何形状定义的线段的方位角（以弧度表示），如果两个点重合，则返回 <code class="docutils literal notranslate"><span class="pre">None</span></code>。方位角是以北方为参考的角度，顺时针方向为正：north = <code class="docutils literal notranslate"><span class="pre">0</span></code>; east = <code class="docutils literal notranslate"><span class="pre">π/2</span></code>; south = <code class="docutils literal notranslate"><span class="pre">π</span></code>; west = <code class="docutils literal notranslate"><span class="pre">3π/2</span></code>。</p>
</div>
<div class="section" id="s-boundingcircle">
<span id="boundingcircle"></span><h2><code class="docutils literal notranslate"><span class="pre">BoundingCircle</span></code><a class="headerlink" href="#boundingcircle" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.BoundingCircle">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">BoundingCircle</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="n"><span class="pre">num_seg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">48</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.BoundingCircle" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>：<a class="reference external" href="https://postgis.net/docs/ST_MinimumBoundingCircle.html">PostGIS</a>, <a class="reference external" href="https://docs.oracle.com/en/database/oracle/oracle-database/21/spatl/SDO_GEOM-reference.html#GUID-82A61626-BB64-4793-B53D-A0DBEC91831A">Oracle</a></p>
<p>接受单个地理字段或表达式，并返回可以完全包含几何形状的最小圆形多边形。</p>
<p><code class="docutils literal notranslate"><span class="pre">num_seg</span></code> 参数仅在 PostGIS 中使用。</p>
</div>
<div class="section" id="s-centroid">
<span id="centroid"></span><h2><code class="docutils literal notranslate"><span class="pre">Centroid</span></code><a class="headerlink" href="#centroid" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.Centroid">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Centroid</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.Centroid" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>：MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-polygon-property-functions.html#function_st-centroid">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_Centroid.html">PostGIS</a>, Oracle, SpatiaLite</p>
<p>接受单个地理字段或表达式，并返回几何形状的 <code class="docutils literal notranslate"><span class="pre">centroid</span></code> 值。</p>
</div>
<div class="section" id="s-closestpoint">
<span id="closestpoint"></span><h2><code class="docutils literal notranslate"><span class="pre">ClosestPoint</span></code><a class="headerlink" href="#closestpoint" title="永久链接至标题">¶</a></h2>
<div class="versionadded">
<span class="title">New in Django 5.0.</span> </div>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.ClosestPoint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">ClosestPoint</span></code>(<em><span class="n"><span class="pre">expr1</span></span></em>, <em><span class="n"><span class="pre">expr2</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.ClosestPoint" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_ClosestPoint.html">PostGIS</a>, SpatiaLite</p>
<p>接受两个地理字段或表达式，并返回在几何体 A 上最接近几何体 B 的二维点。</p>
</div>
<div class="section" id="s-difference">
<span id="difference"></span><h2><code class="docutils literal notranslate"><span class="pre">Difference</span></code><a class="headerlink" href="#difference" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.Difference">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Difference</span></code>(<em><span class="n"><span class="pre">expr1</span></span></em>, <em><span class="n"><span class="pre">expr2</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.Difference" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/spatial-operator-functions.html#function_st-difference">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_Difference.html">PostGIS</a>, Oracle, SpatiaLite</p>
<p>接受两个地理字段或表达式，并返回几何差异，即几何 A 中与几何 B 不相交的部分。</p>
</div>
<div class="section" id="s-distance">
<span id="distance"></span><h2><code class="docutils literal notranslate"><span class="pre">Distance</span></code><a class="headerlink" href="#distance" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.Distance">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Distance</span></code>(<em><span class="n"><span class="pre">expr1</span></span></em>, <em><span class="n"><span class="pre">expr2</span></span></em>, <em><span class="n"><span class="pre">spheroid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.Distance" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/spatial-relation-functions-object-shapes.html#function_st-distance">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_Distance.html">PostGIS</a>, Oracle, SpatiaLite</p>
<p>接受两个地理字段或表达式，并返回它们之间的距离，作为一个 <a class="reference internal" href="measure.html#django.contrib.gis.measure.Distance" title="django.contrib.gis.measure.Distance"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distance</span></code></a> 对象。在 MySQL 上，当坐标是大地测量时，会返回原始的浮点值。</p>
<p>在支持大地测量坐标距离计算的后端上，根据几何形状的 SRID 值，会自动选择合适的后端函数（例如，在 PostGIS 上使用 <a class="reference external" href="https://postgis.net/docs/ST_DistanceSphere.html">ST_DistanceSphere</a>）。</p>
<p>当使用大地测量（角度）坐标计算距离时，例如默认的 WGS84 (4326) SRID，您可以设置 <code class="docutils literal notranslate"><span class="pre">spheroid</span></code> 关键字参数来决定计算是基于简单球体（精度较低，资源消耗较少）还是基于椭球体（精度较高，资源消耗较多）。</p>
<p>在以下示例中，计算了从霍巴特市到 <code class="docutils literal notranslate"><span class="pre">AustraliaCity</span></code> 查询集中的每个其他 <a class="reference internal" href="model-api.html#django.contrib.gis.db.models.PointField" title="django.contrib.gis.db.models.PointField"><code class="xref py py-class docutils literal notranslate"><span class="pre">PointField</span></code></a> 的距离：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.contrib.gis.db.models.functions</span> <span class="kn">import</span> <span class="n">Distance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pnt</span> <span class="o">=</span> <span class="n">AustraliaCity</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Hobart&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">point</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">city</span> <span class="ow">in</span> <span class="n">AustraliaCity</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">distance</span><span class="o">=</span><span class="n">Distance</span><span class="p">(</span><span class="s2">&quot;point&quot;</span><span class="p">,</span> <span class="n">pnt</span><span class="p">)):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">city</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">city</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">Wollongong 990071.220408 m</span>
<span class="go">Shellharbour 972804.613941 m</span>
<span class="go">Thirroul 1002334.36351 m</span>
<span class="go">...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">备注</p>
<p class="last">因为 <code class="docutils literal notranslate"><span class="pre">distance</span></code> 属性是一个 <a class="reference internal" href="measure.html#django.contrib.gis.measure.Distance" title="django.contrib.gis.measure.Distance"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distance</span></code></a> 对象，您可以轻松地以您选择的单位表示该值。例如，<code class="docutils literal notranslate"><span class="pre">city.distance.mi</span></code> 表示英里中的距离值，<code class="docutils literal notranslate"><span class="pre">city.distance.km</span></code> 表示千米中的距离值。有关用法详细信息和支持的单位列表，请参阅 <a class="reference internal" href="measure.html"><span class="doc">测量对象</span></a>。</p>
</div>
</div>
<div class="section" id="s-envelope">
<span id="envelope"></span><h2><code class="docutils literal notranslate"><span class="pre">Envelope</span></code><a class="headerlink" href="#envelope" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.Envelope">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Envelope</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.Envelope" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-general-property-functions.html#function_st-envelope">MySQL</a>, <a class="reference external" href="https://docs.oracle.com/en/database/oracle/oracle-database/21/spatl/spatial-operators-reference.html#GUID-ACED800F-3435-44AA-9606-D40934A23ED0">Oracle</a>, <a class="reference external" href="https://postgis.net/docs/ST_Envelope.html">PostGIS</a>, SpatiaLite</p>
<p>接受单个地理字段或表达式，并返回表示几何形状的边界框的几何形状。</p>
</div>
<div class="section" id="s-forcepolygoncw">
<span id="forcepolygoncw"></span><h2><code class="docutils literal notranslate"><span class="pre">ForcePolygonCW</span></code><a class="headerlink" href="#forcepolygoncw" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.ForcePolygonCW">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">ForcePolygonCW</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.ForcePolygonCW" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_ForcePolygonCW.html">PostGIS</a>, SpatiaLite</p>
<p>接受单个地理字段或表达式，并返回多边形/多多边形的修改版本，其中所有外部环都按顺时针方向排列，所有内部环都按逆时针方向排列。非多边形几何形状保持不变。</p>
</div>
<div class="section" id="s-fromwkb">
<span id="fromwkb"></span><h2><code class="docutils literal notranslate"><span class="pre">FromWKB</span></code><a class="headerlink" href="#fromwkb" title="永久链接至标题">¶</a></h2>
<div class="versionadded">
<span class="title">New in Django 4.2.</span> </div>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.FromWKB">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">FromWKB</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.FromWKB" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-wkb-functions.html#function_st-geomfromwkb">MySQL</a>, Oracle, <a class="reference external" href="https://postgis.net/docs/ST_GeomFromWKB.html">PostGIS</a>, SpatiaLite</p>
<p>从 <a class="reference external" href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry#Well-known_binary">Well-known binary (WKB)</a> 表示创建几何形状。</p>
</div>
<div class="section" id="s-fromwkt">
<span id="fromwkt"></span><h2><code class="docutils literal notranslate"><span class="pre">FromWKT</span></code><a class="headerlink" href="#fromwkt" title="永久链接至标题">¶</a></h2>
<div class="versionadded">
<span class="title">New in Django 4.2.</span> </div>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.FromWKT">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">FromWKT</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.FromWKT" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-wkt-functions.html#function_st-geomfromtext">MySQL</a>, Oracle, <a class="reference external" href="https://postgis.net/docs/ST_GeomFromText.html">PostGIS</a>, SpatiaLite</p>
<p>从 <a class="reference external" href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry">Well-known text (WKT)</a> 表示创建几何形状。</p>
</div>
<div class="section" id="s-geohash">
<span id="geohash"></span><h2><code class="docutils literal notranslate"><span class="pre">GeoHash</span></code><a class="headerlink" href="#geohash" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.GeoHash">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">GeoHash</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="n"><span class="pre">precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.GeoHash" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://dev.mysql.com/doc/refman/en/spatial-geohash-functions.html#function_st-geohash">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_GeoHash.html">PostGIS</a>, SpatiaLite (LWGEOM/RTTOPO)</p>
<p>接受单个地理字段或表达式，并返回几何形状的 <a class="reference external" href="https://en.wikipedia.org/wiki/Geohash">GeoHash</a> 表示。</p>
<p><code class="docutils literal notranslate"><span class="pre">precision</span></code> 关键字参数控制结果中的字符数。</p>
</div>
<div class="section" id="s-geometrydistance">
<span id="geometrydistance"></span><h2><code class="docutils literal notranslate"><span class="pre">GeometryDistance</span></code><a class="headerlink" href="#geometrydistance" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.GeometryDistance">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">GeometryDistance</span></code>(<em><span class="n"><span class="pre">expr1</span></span></em>, <em><span class="n"><span class="pre">expr2</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.GeometryDistance" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/geometry_distance_knn.html">PostGIS</a></p>
<p>接受两个地理字段或表达式，并返回它们之间的距离。当在 <a class="reference internal" href="../../models/querysets.html#django.db.models.query.QuerySet.order_by" title="django.db.models.query.QuerySet.order_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">order_by()</span></code></a> 子句中使用时，它提供了辅助索引的最近邻结果集。</p>
</div>
<div class="section" id="s-intersection">
<span id="intersection"></span><h2><code class="docutils literal notranslate"><span class="pre">Intersection</span></code><a class="headerlink" href="#intersection" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.Intersection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Intersection</span></code>(<em><span class="n"><span class="pre">expr1</span></span></em>, <em><span class="n"><span class="pre">expr2</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.Intersection" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/spatial-operator-functions.html#function_st-intersection">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_Intersection.html">PostGIS</a>, Oracle, SpatiaLite</p>
<p>接受两个地理字段或表达式，并返回它们之间的几何交集。</p>
</div>
<div class="section" id="s-isempty">
<span id="isempty"></span><h2><code class="docutils literal notranslate"><span class="pre">IsEmpty</span></code><a class="headerlink" href="#isempty" title="永久链接至标题">¶</a></h2>
<div class="versionadded">
<span class="title">New in Django 4.2.</span> </div>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.IsEmpty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">IsEmpty</span></code>(<em><span class="n"><span class="pre">expr</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.IsEmpty" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_IsEmpty.html">PostGIS</a></p>
<p>接受地理字段或表达式，并测试其值是否为空几何形状。如果其值为空，则返回 <code class="docutils literal notranslate"><span class="pre">True</span></code>，否则返回 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
</div>
<div class="section" id="s-isvalid">
<span id="isvalid"></span><h2><code class="docutils literal notranslate"><span class="pre">IsValid</span></code><a class="headerlink" href="#isvalid" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.IsValid">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">IsValid</span></code>(<em><span class="n"><span class="pre">expr</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.IsValid" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://dev.mysql.com/doc/refman/en/spatial-convenience-functions.html#function_st-isvalid">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_IsValid.html">PostGIS</a>, Oracle, SpatiaLite</p>
<p>接受地理字段或表达式，并测试其值是否格式正确。如果其值是有效的几何形状，则返回 <code class="docutils literal notranslate"><span class="pre">True</span></code>，否则返回 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
</div>
<div class="section" id="s-length">
<span id="length"></span><h2><code class="docutils literal notranslate"><span class="pre">Length</span></code><a class="headerlink" href="#length" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.Length">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Length</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="n"><span class="pre">spheroid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.Length" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-linestring-property-functions.html#function_st-length">MySQL</a>, Oracle, <a class="reference external" href="https://postgis.net/docs/ST_Length.html">PostGIS</a>, SpatiaLite</p>
<p>接受单个地理线串或多线串字段或表达式，并将其长度返回为 <a class="reference internal" href="measure.html#django.contrib.gis.measure.Distance" title="django.contrib.gis.measure.Distance"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distance</span></code></a> 测量。</p>
<p>在 PostGIS 和 SpatiaLite 上，当坐标是大地测量（角度）时，您可以使用 <code class="docutils literal notranslate"><span class="pre">spheroid</span></code> 关键字参数来指定计算是基于简单球体（精度较低，资源消耗较少）还是基于椭球体（精度较高，资源消耗较多）。</p>
<p>MySQL 不支持在地理 SRS 上进行长度计算。</p>
</div>
<div class="section" id="s-linelocatepoint">
<span id="linelocatepoint"></span><h2><code class="docutils literal notranslate"><span class="pre">LineLocatePoint</span></code><a class="headerlink" href="#linelocatepoint" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.LineLocatePoint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">LineLocatePoint</span></code>(<em><span class="n"><span class="pre">linestring</span></span></em>, <em><span class="n"><span class="pre">point</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.LineLocatePoint" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_LineLocatePoint.html">PostGIS</a>, SpatiaLite</p>
<p>返回一个介于 0 和 1 之间的浮点数，表示最接近给定的 <code class="docutils literal notranslate"><span class="pre">point</span></code> 在 <code class="docutils literal notranslate"><span class="pre">linestring</span></code> 上的位置，作为 2D 线长度的一部分。</p>
</div>
<div class="section" id="s-makevalid">
<span id="makevalid"></span><h2><code class="docutils literal notranslate"><span class="pre">MakeValid</span></code><a class="headerlink" href="#makevalid" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.MakeValid">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">MakeValid</span></code>(<em><span class="n"><span class="pre">expr</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.MakeValid" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_MakeValid.html">PostGIS</a>, SpatiaLite (LWGEOM/RTTOPO)</p>
<p>接受地理字段或表达式，并尝试将值转换为有效的几何形状，同时不丢失任何输入顶点。已经有效的几何形状将保持不变。简单多边形可能会变成多重多边形，结果的维度可能比输入低。</p>
</div>
<div class="section" id="s-memsize">
<span id="memsize"></span><h2><code class="docutils literal notranslate"><span class="pre">MemSize</span></code><a class="headerlink" href="#memsize" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.MemSize">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">MemSize</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.MemSize" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_MemSize.html">PostGIS</a></p>
<p>接受单个地理字段或表达式，并返回几何字段占用的内存大小（字节数）。</p>
</div>
<div class="section" id="s-numgeometries">
<span id="numgeometries"></span><h2><code class="docutils literal notranslate"><span class="pre">NumGeometries</span></code><a class="headerlink" href="#numgeometries" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.NumGeometries">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">NumGeometries</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.NumGeometries" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-geometrycollection-property-functions.html#function_st-numgeometries">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_NumGeometries.html">PostGIS</a>, Oracle, SpatiaLite</p>
<p>接受单个地理字段或表达式，并返回如果几何字段是集合（例如 <code class="docutils literal notranslate"><span class="pre">GEOMETRYCOLLECTION</span></code> 或 <code class="docutils literal notranslate"><span class="pre">MULTI*</span></code> 字段）则包含的几何形状数量。对于单个几何形状，返回 1。</p>
<p>在 MySQL 上，对于单个几何形状，返回 <code class="docutils literal notranslate"><span class="pre">None</span></code>。</p>
</div>
<div class="section" id="s-numpoints">
<span id="numpoints"></span><h2><code class="docutils literal notranslate"><span class="pre">NumPoints</span></code><a class="headerlink" href="#numpoints" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.NumPoints">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">NumPoints</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.NumPoints" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-linestring-property-functions.html#function_st-numpoints">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_NPoints.html">PostGIS</a>, Oracle, SpatiaLite</p>
<p>接受单个地理字段或表达式，并返回几何形状中点的数量。</p>
<p>在 MySQL 上，对于任何非 <code class="docutils literal notranslate"><span class="pre">LINESTRING</span></code> 几何形状，返回 <code class="docutils literal notranslate"><span class="pre">None</span></code>。</p>
</div>
<div class="section" id="s-perimeter">
<span id="perimeter"></span><h2><code class="docutils literal notranslate"><span class="pre">Perimeter</span></code><a class="headerlink" href="#perimeter" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.Perimeter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Perimeter</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.Perimeter" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Perimeter.html">PostGIS</a>, Oracle, SpatiaLite</p>
<p>接受单个地理字段或表达式，并将几何字段的周长返回为 <a class="reference internal" href="measure.html#django.contrib.gis.measure.Distance" title="django.contrib.gis.measure.Distance"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distance</span></code></a> 对象。</p>
</div>
<div class="section" id="s-pointonsurface">
<span id="pointonsurface"></span><h2><code class="docutils literal notranslate"><span class="pre">PointOnSurface</span></code><a class="headerlink" href="#pointonsurface" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.PointOnSurface">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">PointOnSurface</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.PointOnSurface" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_PointOnSurface.html">PostGIS</a>, MariaDB, Oracle, SpatiaLite</p>
<p>接受单个地理字段或表达式，并返回一个保证位于字段表面上的 <code class="docutils literal notranslate"><span class="pre">Point</span></code> 几何形状；否则返回 <code class="docutils literal notranslate"><span class="pre">None</span></code>。</p>
</div>
<div class="section" id="s-reverse">
<span id="reverse"></span><h2><code class="docutils literal notranslate"><span class="pre">Reverse</span></code><a class="headerlink" href="#reverse" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.Reverse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Reverse</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.Reverse" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Reverse.html">PostGIS</a>, Oracle, SpatiaLite</p>
<p>接受单个地理字段或表达式，并返回具有颠倒坐标的几何形状。</p>
</div>
<div class="section" id="s-scale">
<span id="scale"></span><h2><code class="docutils literal notranslate"><span class="pre">Scale</span></code><a class="headerlink" href="#scale" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.Scale">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Scale</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="n"><span class="pre">x</span></span></em>, <em><span class="n"><span class="pre">y</span></span></em>, <em><span class="n"><span class="pre">z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.Scale" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Scale.html">PostGIS</a>, SpatiaLite</p>
<p>接受单个地理字段或表达式，并返回通过将坐标与 <code class="docutils literal notranslate"><span class="pre">x</span></code>、<code class="docutils literal notranslate"><span class="pre">y</span></code> 和可选的 <code class="docutils literal notranslate"><span class="pre">z</span></code> 参数相乘来缩放坐标的几何形状。</p>
</div>
<div class="section" id="s-snaptogrid">
<span id="snaptogrid"></span><h2><code class="docutils literal notranslate"><span class="pre">SnapToGrid</span></code><a class="headerlink" href="#snaptogrid" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.SnapToGrid">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">SnapToGrid</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.SnapToGrid" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_SnapToGrid.html">PostGIS</a>, SpatiaLite</p>
<p>接受单个地理字段或表达式，并返回所有点都根据给定的网格进行捕捉的几何形状。如何将几何形状捕捉到网格取决于提供了多少个数字参数（可以是浮点数、整数或长整数）。</p>
<table class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数数量：</th>
<th class="head">描述</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>一个单独的大小，用于捕捉 X 和 Y 网格。</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>捕捉网格的 X 和 Y 大小。</td>
</tr>
<tr class="row-even"><td>4</td>
<td>X、Y 大小以及相应的 X、Y 起始点。</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-symdifference">
<span id="symdifference"></span><h2><code class="docutils literal notranslate"><span class="pre">SymDifference</span></code><a class="headerlink" href="#symdifference" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.SymDifference">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">SymDifference</span></code>(<em><span class="n"><span class="pre">expr1</span></span></em>, <em><span class="n"><span class="pre">expr2</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.SymDifference" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/spatial-operator-functions.html#function_st-symdifference">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_SymDifference.html">PostGIS</a>, Oracle, SpatiaLite</p>
<p>接受两个地理字段或表达式，并返回给定参数之间的几何对称差异（联合而不包括交集）。</p>
</div>
<div class="section" id="s-transform">
<span id="transform"></span><h2><code class="docutils literal notranslate"><span class="pre">Transform</span></code><a class="headerlink" href="#transform" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.Transform">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Transform</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="n"><span class="pre">srid</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.Transform" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Transform.html">PostGIS</a>, Oracle, SpatiaLite</p>
<p>接受一个地理字段或表达式以及一个 SRID 整数代码，并将几何形状转换为由 <code class="docutils literal notranslate"><span class="pre">srid</span></code> 参数指定的空间参考系统。</p>
<div class="admonition note">
<p class="first admonition-title">备注</p>
<p class="last">整数 SRID 对应的空间参考系统可能取决于使用的空间数据库。换句话说，用于 Oracle 的 SRID 号码不一定与用于 PostGIS 的相同。</p>
</div>
</div>
<div class="section" id="s-translate">
<span id="translate"></span><h2><code class="docutils literal notranslate"><span class="pre">Translate</span></code><a class="headerlink" href="#translate" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.Translate">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Translate</span></code>(<em><span class="n"><span class="pre">expression</span></span></em>, <em><span class="n"><span class="pre">x</span></span></em>, <em><span class="n"><span class="pre">y</span></span></em>, <em><span class="n"><span class="pre">z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.Translate" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Translate.html">PostGIS</a>, SpatiaLite</p>
<p>接受单个地理字段或表达式，并返回其坐标根据 <code class="docutils literal notranslate"><span class="pre">x</span></code>、<code class="docutils literal notranslate"><span class="pre">y</span></code> 和可选的 <code class="docutils literal notranslate"><span class="pre">z</span></code> 数值参数进行偏移的几何形状。</p>
</div>
<div class="section" id="s-union">
<span id="union"></span><h2><code class="docutils literal notranslate"><span class="pre">Union</span></code><a class="headerlink" href="#union" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.functions.Union">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Union</span></code>(<em><span class="n"><span class="pre">expr1</span></span></em>, <em><span class="n"><span class="pre">expr2</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.functions.Union" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/spatial-operator-functions.html#function_st-union">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_Union.html">PostGIS</a>, Oracle, SpatiaLite</p>
<p>接受两个地理字段或表达式，并返回两个几何形状的联合。</p>
</div>
</div>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../../contents.html">目录</a></h3>
    <ul>
<li><a class="reference internal" href="#">地理数据库函数</a><ul>
<li><a class="reference internal" href="#area"><code class="docutils literal notranslate"><span class="pre">Area</span></code></a></li>
<li><a class="reference internal" href="#asgeojson"><code class="docutils literal notranslate"><span class="pre">AsGeoJSON</span></code></a></li>
<li><a class="reference internal" href="#asgml"><code class="docutils literal notranslate"><span class="pre">AsGML</span></code></a></li>
<li><a class="reference internal" href="#askml"><code class="docutils literal notranslate"><span class="pre">AsKML</span></code></a></li>
<li><a class="reference internal" href="#assvg"><code class="docutils literal notranslate"><span class="pre">AsSVG</span></code></a></li>
<li><a class="reference internal" href="#aswkb"><code class="docutils literal notranslate"><span class="pre">AsWKB</span></code></a></li>
<li><a class="reference internal" href="#aswkt"><code class="docutils literal notranslate"><span class="pre">AsWKT</span></code></a></li>
<li><a class="reference internal" href="#azimuth"><code class="docutils literal notranslate"><span class="pre">Azimuth</span></code></a></li>
<li><a class="reference internal" href="#boundingcircle"><code class="docutils literal notranslate"><span class="pre">BoundingCircle</span></code></a></li>
<li><a class="reference internal" href="#centroid"><code class="docutils literal notranslate"><span class="pre">Centroid</span></code></a></li>
<li><a class="reference internal" href="#closestpoint"><code class="docutils literal notranslate"><span class="pre">ClosestPoint</span></code></a></li>
<li><a class="reference internal" href="#difference"><code class="docutils literal notranslate"><span class="pre">Difference</span></code></a></li>
<li><a class="reference internal" href="#distance"><code class="docutils literal notranslate"><span class="pre">Distance</span></code></a></li>
<li><a class="reference internal" href="#envelope"><code class="docutils literal notranslate"><span class="pre">Envelope</span></code></a></li>
<li><a class="reference internal" href="#forcepolygoncw"><code class="docutils literal notranslate"><span class="pre">ForcePolygonCW</span></code></a></li>
<li><a class="reference internal" href="#fromwkb"><code class="docutils literal notranslate"><span class="pre">FromWKB</span></code></a></li>
<li><a class="reference internal" href="#fromwkt"><code class="docutils literal notranslate"><span class="pre">FromWKT</span></code></a></li>
<li><a class="reference internal" href="#geohash"><code class="docutils literal notranslate"><span class="pre">GeoHash</span></code></a></li>
<li><a class="reference internal" href="#geometrydistance"><code class="docutils literal notranslate"><span class="pre">GeometryDistance</span></code></a></li>
<li><a class="reference internal" href="#intersection"><code class="docutils literal notranslate"><span class="pre">Intersection</span></code></a></li>
<li><a class="reference internal" href="#isempty"><code class="docutils literal notranslate"><span class="pre">IsEmpty</span></code></a></li>
<li><a class="reference internal" href="#isvalid"><code class="docutils literal notranslate"><span class="pre">IsValid</span></code></a></li>
<li><a class="reference internal" href="#length"><code class="docutils literal notranslate"><span class="pre">Length</span></code></a></li>
<li><a class="reference internal" href="#linelocatepoint"><code class="docutils literal notranslate"><span class="pre">LineLocatePoint</span></code></a></li>
<li><a class="reference internal" href="#makevalid"><code class="docutils literal notranslate"><span class="pre">MakeValid</span></code></a></li>
<li><a class="reference internal" href="#memsize"><code class="docutils literal notranslate"><span class="pre">MemSize</span></code></a></li>
<li><a class="reference internal" href="#numgeometries"><code class="docutils literal notranslate"><span class="pre">NumGeometries</span></code></a></li>
<li><a class="reference internal" href="#numpoints"><code class="docutils literal notranslate"><span class="pre">NumPoints</span></code></a></li>
<li><a class="reference internal" href="#perimeter"><code class="docutils literal notranslate"><span class="pre">Perimeter</span></code></a></li>
<li><a class="reference internal" href="#pointonsurface"><code class="docutils literal notranslate"><span class="pre">PointOnSurface</span></code></a></li>
<li><a class="reference internal" href="#reverse"><code class="docutils literal notranslate"><span class="pre">Reverse</span></code></a></li>
<li><a class="reference internal" href="#scale"><code class="docutils literal notranslate"><span class="pre">Scale</span></code></a></li>
<li><a class="reference internal" href="#snaptogrid"><code class="docutils literal notranslate"><span class="pre">SnapToGrid</span></code></a></li>
<li><a class="reference internal" href="#symdifference"><code class="docutils literal notranslate"><span class="pre">SymDifference</span></code></a></li>
<li><a class="reference internal" href="#transform"><code class="docutils literal notranslate"><span class="pre">Transform</span></code></a></li>
<li><a class="reference internal" href="#translate"><code class="docutils literal notranslate"><span class="pre">Translate</span></code></a></li>
<li><a class="reference internal" href="#union"><code class="docutils literal notranslate"><span class="pre">Union</span></code></a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>上一个主题</h4>
    <p class="topless"><a href="geoquerysets.html"
                          title="上一章">GIS QuerySet API 参考</a></p>
  </div>
  <div>
    <h4>下一个主题</h4>
    <p class="topless"><a href="measure.html"
                          title="下一章">测量对象</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/ref/contrib/gis/functions.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">3月 29, 2024</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="geoquerysets.html" title="GIS QuerySet API 参考">previous</a>
     |
    <a href="../../index.html" title="API 参考" accesskey="U">up</a>
   |
    <a href="measure.html" title="测量对象">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>
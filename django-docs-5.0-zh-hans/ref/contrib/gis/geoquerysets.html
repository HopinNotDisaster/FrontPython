
<!DOCTYPE html>

<html lang="zh_Hans">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GIS QuerySet API 参考 &#8212; Django 5.0.4.dev20240329153429 文档</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/default.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../search.html" />
    <link rel="next" title="地理数据库函数" href="functions.html" />
    <link rel="prev" title="GeoDjango 表单 API" href="forms-api.html" />



 
<script src="../../../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../../templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../../../index.html">Django 5.0.4.dev20240329153429 文档</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../../index.html">Home</a>  |
        <a title="Table of contents" href="../../../contents.html">Table of contents</a>  |
        <a title="Global index" href="../../../genindex.html">Index</a>  |
        <a title="Module index" href="../../../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="forms-api.html" title="GeoDjango 表单 API">previous</a>
     |
    <a href="../../index.html" title="API 参考" accesskey="U">up</a>
   |
    <a href="functions.html" title="地理数据库函数">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="ref-contrib-gis-geoquerysets">
            
  <div class="section" id="s-gis-queryset-api-reference">
<span id="gis-queryset-api-reference"></span><h1>GIS QuerySet API 参考<a class="headerlink" href="#gis-queryset-api-reference" title="永久链接至标题">¶</a></h1>
<div class="section" id="s-spatial-lookups">
<span id="s-id1"></span><span id="spatial-lookups"></span><span id="id1"></span><h2>空间查找<a class="headerlink" href="#spatial-lookups" title="永久链接至标题">¶</a></h2>
<p>这个部分中的空间查找适用于 <a class="reference internal" href="model-api.html#django.contrib.gis.db.models.GeometryField" title="django.contrib.gis.db.models.GeometryField"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeometryField</span></code></a> 和 <a class="reference internal" href="model-api.html#django.contrib.gis.db.models.RasterField" title="django.contrib.gis.db.models.RasterField"><code class="xref py py-class docutils literal notranslate"><span class="pre">RasterField</span></code></a>。</p>
<p>有关介绍，请参见 <a class="reference internal" href="db-api.html#spatial-lookups-intro"><span class="std std-ref">空间查找引言</span></a>。要查看与特定空间后端兼容的查找方式的概述，请参考 <a class="reference internal" href="db-api.html#spatial-lookup-compatibility"><span class="std std-ref">空间查找兼容性表</span></a>。</p>
<div class="section" id="s-lookups-with-rasters">
<span id="lookups-with-rasters"></span><h3>栅格查找方式<a class="headerlink" href="#lookups-with-rasters" title="永久链接至标题">¶</a></h3>
<p>参考下面的文档中，所有示例都是针对几何字段和输入的，但是查找方式可以在两侧都以相同的方式用于栅格。每当某个查找方式不支持栅格输入时，输入将自动转换为几何，必要时使用 <a class="reference external" href="https://postgis.net/docs/RT_ST_Polygon.html">ST_Polygon</a> 函数。还请参阅 <a class="reference internal" href="db-api.html#spatial-lookup-raster"><span class="std std-ref">栅格查找引言</span></a>。</p>
<p>查找方式使用的数据库运算符可以分为三类：</p>
<ul class="simple">
<li>本地栅格支持 <code class="docutils literal notranslate"><span class="pre">N</span></code>：该运算符在查找的两侧都可以本地接受栅格，并且可以混合使用栅格输入和几何输入。</li>
<li>双向栅格支持 <code class="docutils literal notranslate"><span class="pre">B</span></code>：该运算符仅在查找的两侧都接收栅格输入时支持栅格。对于混合查找，栅格数据会自动转换为几何数据。</li>
<li>几何转换支持 <code class="docutils literal notranslate"><span class="pre">C</span></code>：该查找方式不支持原生栅格，所有栅格数据都会自动转换为几何数据。</li>
</ul>
<p>以下示例展示了不同类型栅格支持的查找方式的 SQL 等效方式。相同的模式适用于所有空间查找方式。</p>
<table class="docutils">
<colgroup>
<col width="4%" />
<col width="34%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">案例</th>
<th class="head">查找</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>N, B</td>
<td><code class="docutils literal notranslate"><span class="pre">rast__contains=rst</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Contains(rast,</span> <span class="pre">rst)</span></code></td>
</tr>
<tr class="row-odd"><td>N, B</td>
<td><code class="docutils literal notranslate"><span class="pre">rast__1__contains=(rst,</span> <span class="pre">2)</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Contains(rast,</span> <span class="pre">1,</span> <span class="pre">rst,</span> <span class="pre">2)</span></code></td>
</tr>
<tr class="row-even"><td>B, C</td>
<td><code class="docutils literal notranslate"><span class="pre">rast__contains=geom</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Contains(ST_Polygon(rast),</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>B, C</td>
<td><code class="docutils literal notranslate"><span class="pre">rast__1__contains=geom</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Contains(ST_Polygon(rast,</span> <span class="pre">1),</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>B, C</td>
<td><code class="docutils literal notranslate"><span class="pre">poly__contains=rst</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Contains(poly,</span> <span class="pre">ST_Polygon(rst))</span></code></td>
</tr>
<tr class="row-odd"><td>B, C</td>
<td><code class="docutils literal notranslate"><span class="pre">poly__contains=(rst,</span> <span class="pre">1)</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Contains(poly,</span> <span class="pre">ST_Polygon(rst,</span> <span class="pre">1))</span></code></td>
</tr>
<tr class="row-even"><td>C</td>
<td><code class="docutils literal notranslate"><span class="pre">rast__crosses=rst</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Crosses(ST_Polygon(rast),</span> <span class="pre">ST_Polygon(rst))</span></code></td>
</tr>
<tr class="row-odd"><td>C</td>
<td><code class="docutils literal notranslate"><span class="pre">rast__1__crosses=(rst,</span> <span class="pre">2)</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Crosses(ST_Polygon(rast,</span> <span class="pre">1),</span> <span class="pre">ST_Polygon(rst,</span> <span class="pre">2))</span></code></td>
</tr>
<tr class="row-even"><td>C</td>
<td><code class="docutils literal notranslate"><span class="pre">rast__crosses=geom</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Crosses(ST_Polygon(rast),</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>C</td>
<td><code class="docutils literal notranslate"><span class="pre">poly__crosses=rst</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Crosses(poly,</span> <span class="pre">ST_Polygon(rst))</span></code></td>
</tr>
</tbody>
</table>
<p>仅支持在 PostGIS 后端（在本节中称为 PGRaster）中使用栅格进行空间查找。</p>
</div>
<div class="section" id="s-bbcontains">
<span id="s-std-fieldlookup-bbcontains"></span><span id="s-std:fieldlookup-bbcontains"></span><span id="bbcontains"></span><span id="std-fieldlookup-bbcontains"></span><span id="std:fieldlookup-bbcontains"></span><h3><code class="docutils literal notranslate"><span class="pre">bbcontains</span></code><a class="headerlink" href="#bbcontains" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Geometry_Contain.html">PostGIS</a>, MariaDB, MySQL, SpatiaLite, PGRaster (Native)</p>
<p>测试几何或栅格字段的边界框是否完全包含查找几何的边界框。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__bbcontains</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">poly</span> <span class="pre">~</span> <span class="pre">geom</span></code></td>
</tr>
<tr class="row-odd"><td>MariaDB</td>
<td><code class="docutils literal notranslate"><span class="pre">MBRContains(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>MySQL</td>
<td><code class="docutils literal notranslate"><span class="pre">MBRContains(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">MbrContains(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-bboverlaps">
<span id="s-std-fieldlookup-bboverlaps"></span><span id="s-std:fieldlookup-bboverlaps"></span><span id="bboverlaps"></span><span id="std-fieldlookup-bboverlaps"></span><span id="std:fieldlookup-bboverlaps"></span><h3><code class="docutils literal notranslate"><span class="pre">bboverlaps</span></code><a class="headerlink" href="#bboverlaps" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/geometry_overlaps.html">PostGIS</a>, MariaDB, MySQL, SpatiaLite, PGRaster (Native)</p>
<p>测试几何字段的边界框是否与查找几何的边界框重叠。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__bboverlaps</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">poly</span> <span class="pre">&amp;&amp;</span> <span class="pre">geom</span></code></td>
</tr>
<tr class="row-odd"><td>MariaDB</td>
<td><code class="docutils literal notranslate"><span class="pre">MBROverlaps(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>MySQL</td>
<td><code class="docutils literal notranslate"><span class="pre">MBROverlaps(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">MbrOverlaps(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-contained">
<span id="s-std-fieldlookup-contained"></span><span id="s-std:fieldlookup-contained"></span><span id="contained"></span><span id="std-fieldlookup-contained"></span><span id="std:fieldlookup-contained"></span><h3><code class="docutils literal notranslate"><span class="pre">contained</span></code><a class="headerlink" href="#contained" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Geometry_Contained.html">PostGIS</a>, MariaDB, MySQL, SpatiaLite, PGRaster (Native)</p>
<p>测试几何字段的边界框是否完全包含在查找几何的边界框内。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__contained</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">poly</span> <span class="pre">&#64;</span> <span class="pre">geom</span></code></td>
</tr>
<tr class="row-odd"><td>MariaDB</td>
<td><code class="docutils literal notranslate"><span class="pre">MBRWithin(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>MySQL</td>
<td><code class="docutils literal notranslate"><span class="pre">MBRWithin(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">MbrWithin(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-contains">
<span id="s-std-fieldlookup-gis-contains"></span><span id="s-std:fieldlookup-gis-contains"></span><span id="contains"></span><span id="std-fieldlookup-gis-contains"></span><span id="std:fieldlookup-gis-contains"></span><h3><code class="docutils literal notranslate"><span class="pre">contains</span></code><a class="headerlink" href="#contains" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Contains.html">PostGIS</a>, Oracle, MariaDB, MySQL, SpatiaLite, PGRaster (Bilateral)</p>
<p>测试几何字段是否在空间上包含查找几何。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__contains</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Contains(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>Oracle</td>
<td><code class="docutils literal notranslate"><span class="pre">SDO_CONTAINS(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>MariaDB</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Contains(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>MySQL</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Contains(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">Contains(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-contains-properly">
<span id="s-std-fieldlookup-contains_properly"></span><span id="s-std:fieldlookup-contains_properly"></span><span id="contains-properly"></span><span id="std-fieldlookup-contains_properly"></span><span id="std:fieldlookup-contains_properly"></span><h3><code class="docutils literal notranslate"><span class="pre">contains_properly</span></code><a class="headerlink" href="#contains-properly" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_ContainsProperly.html">PostGIS</a>, PGRaster (Bilateral)</p>
<p>如果查找几何与几何字段的内部相交但不与边界（或外部）相交，则返回 true。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__contains_properly</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_ContainsProperly(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-coveredby">
<span id="s-std-fieldlookup-coveredby"></span><span id="s-std:fieldlookup-coveredby"></span><span id="coveredby"></span><span id="std-fieldlookup-coveredby"></span><span id="std:fieldlookup-coveredby"></span><h3><code class="docutils literal notranslate"><span class="pre">coveredby</span></code><a class="headerlink" href="#coveredby" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_CoveredBy.html">PostGIS</a>, Oracle, PGRaster (Bilateral), SpatiaLite</p>
<p>测试几何字段中是否没有点位于查找几何的外部。 <a class="footnote-reference" href="#fncovers" id="id2">[3]</a></p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__coveredby</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_CoveredBy(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>Oracle</td>
<td><code class="docutils literal notranslate"><span class="pre">SDO_COVEREDBY(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">CoveredBy(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-covers">
<span id="s-std-fieldlookup-covers"></span><span id="s-std:fieldlookup-covers"></span><span id="covers"></span><span id="std-fieldlookup-covers"></span><span id="std:fieldlookup-covers"></span><h3><code class="docutils literal notranslate"><span class="pre">covers</span></code><a class="headerlink" href="#covers" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Covers.html">PostGIS</a>, Oracle, PGRaster (Bilateral), SpatiaLite</p>
<p>测试查找几何中是否没有点位于几何字段的外部。 <a class="footnote-reference" href="#fncovers" id="id3">[3]</a></p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__covers</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Covers(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>Oracle</td>
<td><code class="docutils literal notranslate"><span class="pre">SDO_COVERS(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">Covers(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-crosses">
<span id="s-std-fieldlookup-crosses"></span><span id="s-std:fieldlookup-crosses"></span><span id="crosses"></span><span id="std-fieldlookup-crosses"></span><span id="std:fieldlookup-crosses"></span><h3><code class="docutils literal notranslate"><span class="pre">crosses</span></code><a class="headerlink" href="#crosses" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Crosses.html">PostGIS</a>, MariaDB, MySQL, SpatiaLite, PGRaster (Conversion)</p>
<p>测试几何字段是否在空间上与查找几何交叉。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__crosses</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Crosses(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>MariaDB</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Crosses(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>MySQL</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Crosses(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">Crosses(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-disjoint">
<span id="s-std-fieldlookup-disjoint"></span><span id="s-std:fieldlookup-disjoint"></span><span id="disjoint"></span><span id="std-fieldlookup-disjoint"></span><span id="std:fieldlookup-disjoint"></span><h3><code class="docutils literal notranslate"><span class="pre">disjoint</span></code><a class="headerlink" href="#disjoint" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Disjoint.html">PostGIS</a>, Oracle, MariaDB, MySQL, SpatiaLite, PGRaster (Bilateral)</p>
<p>测试几何字段是否在空间上与查找几何不相交。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__disjoint</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Disjoint(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>Oracle</td>
<td><code class="docutils literal notranslate"><span class="pre">SDO_GEOM.RELATE(poly,</span> <span class="pre">'DISJOINT',</span> <span class="pre">geom,</span> <span class="pre">0.05)</span></code></td>
</tr>
<tr class="row-even"><td>MariaDB</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Disjoint(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>MySQL</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Disjoint(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">Disjoint(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-equals">
<span id="s-std-fieldlookup-equals"></span><span id="s-std:fieldlookup-equals"></span><span id="equals"></span><span id="std-fieldlookup-equals"></span><span id="std:fieldlookup-equals"></span><h3><code class="docutils literal notranslate"><span class="pre">equals</span></code><a class="headerlink" href="#equals" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Equals.html">PostGIS</a>, Oracle, MariaDB, MySQL, SpatiaLite, PGRaster (Conversion)</p>
<p>测试几何字段是否在空间上等于查找几何。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__equals</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Equals(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>Oracle</td>
<td><code class="docutils literal notranslate"><span class="pre">SDO_EQUAL(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>MariaDB</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Equals(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>MySQL</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Equals(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">Equals(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
</tbody>
</table>
<span class="target" id="std-fieldlookup-exact-noindex"><span id="std:fieldlookup-exact :noindex:"></span></span></div>
<div class="section" id="s-exact-same-as">
<span id="s-std-fieldlookup-same_as"></span><span id="s-std:fieldlookup-same_as"></span><span id="exact-same-as"></span><span id="std-fieldlookup-same_as"></span><span id="std:fieldlookup-same_as"></span><h3><code class="docutils literal notranslate"><span class="pre">exact</span></code>, <code class="docutils literal notranslate"><span class="pre">same_as</span></code><a class="headerlink" href="#exact-same-as" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Geometry_Same.html">PostGIS</a>, Oracle, MariaDB, MySQL, SpatiaLite, PGRaster (Bilateral)</p>
<p>测试几何字段是否在 Oracle、MySQL 和 SpatiaLite 上空间上等于查找几何，在 PostGIS 上它测试边界框的相等性。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">poly</span> <span class="pre">~=</span> <span class="pre">geom</span></code></td>
</tr>
<tr class="row-odd"><td>Oracle</td>
<td><code class="docutils literal notranslate"><span class="pre">SDO_EQUAL(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>MariaDB</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Equals(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>MySQL</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Equals(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">Equals(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-intersects">
<span id="s-std-fieldlookup-intersects"></span><span id="s-std:fieldlookup-intersects"></span><span id="intersects"></span><span id="std-fieldlookup-intersects"></span><span id="std:fieldlookup-intersects"></span><h3><code class="docutils literal notranslate"><span class="pre">intersects</span></code><a class="headerlink" href="#intersects" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Intersects.html">PostGIS</a>, Oracle, MariaDB, MySQL, SpatiaLite, PGRaster (Bilateral)</p>
<p>测试几何字段是否在空间上与查找几何相交。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__intersects</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Intersects(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>Oracle</td>
<td><code class="docutils literal notranslate"><span class="pre">SDO_OVERLAPBDYINTERSECT(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>MariaDB</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Intersects(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>MySQL</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Intersects(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">Intersects(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-isempty">
<span id="s-std-fieldlookup-isempty"></span><span id="s-std:fieldlookup-isempty"></span><span id="isempty"></span><span id="std-fieldlookup-isempty"></span><span id="std:fieldlookup-isempty"></span><h3><code class="docutils literal notranslate"><span class="pre">isempty</span></code><a class="headerlink" href="#isempty" title="永久链接至标题">¶</a></h3>
<div class="versionadded">
<span class="title">New in Django 4.2.</span> </div>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_IsEmpty.html">PostGIS</a></p>
<p>测试几何是否为空。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__isempty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="s-isvalid">
<span id="s-std-fieldlookup-isvalid"></span><span id="s-std:fieldlookup-isvalid"></span><span id="isvalid"></span><span id="std-fieldlookup-isvalid"></span><span id="std:fieldlookup-isvalid"></span><h3><code class="docutils literal notranslate"><span class="pre">isvalid</span></code><a class="headerlink" href="#isvalid" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: MySQL, <a class="reference external" href="https://postgis.net/docs/ST_IsValid.html">PostGIS</a>, Oracle, SpatiaLite</p>
<p>测试几何是否有效。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__isvalid</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>MySQL, PostGIS, SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_IsValid(poly)</span></code></td>
</tr>
<tr class="row-odd"><td>Oracle</td>
<td><code class="docutils literal notranslate"><span class="pre">SDO_GEOM.VALIDATE_GEOMETRY_WITH_CONTEXT(poly,</span> <span class="pre">0.05)</span> <span class="pre">=</span> <span class="pre">'TRUE'</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-overlaps">
<span id="s-std-fieldlookup-overlaps"></span><span id="s-std:fieldlookup-overlaps"></span><span id="overlaps"></span><span id="std-fieldlookup-overlaps"></span><span id="std:fieldlookup-overlaps"></span><h3><code class="docutils literal notranslate"><span class="pre">overlaps</span></code><a class="headerlink" href="#overlaps" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Overlaps.html">PostGIS</a>, Oracle, MariaDB, MySQL, SpatiaLite, PGRaster (Bilateral)</p>
<p>测试几何字段是否在空间上与查找几何重叠。</p>
<table class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Overlaps(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>Oracle</td>
<td><code class="docutils literal notranslate"><span class="pre">SDO_OVERLAPS(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>MariaDB</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Overlaps(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>MySQL</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Overlaps(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">Overlaps(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-relate">
<span id="s-std-fieldlookup-relate"></span><span id="s-std:fieldlookup-relate"></span><span id="relate"></span><span id="std-fieldlookup-relate"></span><span id="std:fieldlookup-relate"></span><h3><code class="docutils literal notranslate"><span class="pre">relate</span></code><a class="headerlink" href="#relate" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Relate.html">PostGIS</a>, MariaDB, Oracle, SpatiaLite, PGRaster (Conversion)</p>
<p>测试几何字段是否与查找几何在给定模式中指定的值上存在空间关系。此查找方式需要一个元组参数，<code class="docutils literal notranslate"><span class="pre">(geom,</span> <span class="pre">pattern)</span></code>； <code class="docutils literal notranslate"><span class="pre">pattern</span></code> 的形式将取决于空间后端：</p>
<div class="section" id="s-mariadb-postgis-and-spatialite">
<span id="mariadb-postgis-and-spatialite"></span><h4>MariaDB、PostGIS  和 SpatiaLite<a class="headerlink" href="#mariadb-postgis-and-spatialite" title="永久链接至标题">¶</a></h4>
<p>在这些空间后端上，交集模式是一个包含九个字符的字符串，定义了几何字段的内部、边界和外部与查找几何之间的交集。交集模式矩阵只能使用以下字符：<code class="docutils literal notranslate"><span class="pre">1</span></code>、<code class="docutils literal notranslate"><span class="pre">2</span></code>、<code class="docutils literal notranslate"><span class="pre">T</span></code>、<code class="docutils literal notranslate"><span class="pre">F</span></code> 或 <code class="docutils literal notranslate"><span class="pre">*</span></code>。此查找方式允许用户“微调”与 DE-9IM 模型一致的特定几何关系。<a class="footnote-reference" href="#fnde9im" id="id4">[1]</a></p>
<p>几何示例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># A tuple lookup parameter is used to specify the geometry and</span>
<span class="c1"># the intersection pattern (the pattern here is for &#39;contains&#39;).</span>
<span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__relate</span><span class="o">=</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="s2">&quot;T*T***FF*&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>PostGIS 和 MariaDB 的 SQL 等效方式：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">ST_Relate</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span><span class="w"> </span><span class="n">geom</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;T*T***FF*&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>SpatiaLite 的 SQL 等效方式：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">Relate</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span><span class="w"> </span><span class="n">geom</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;T*T***FF*&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>栅格示例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__relate</span><span class="o">=</span><span class="p">(</span><span class="n">rast</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;T*T***FF*&quot;</span><span class="p">))</span>
<span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">rast__2__relate</span><span class="o">=</span><span class="p">(</span><span class="n">rast</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;T*T***FF*&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>PostGIS 的 SQL 等效方式：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">ST_Relate</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span><span class="w"> </span><span class="n">ST_Polygon</span><span class="p">(</span><span class="n">rast</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="s1">&#39;T*T***FF*&#39;</span><span class="p">)</span>
<span class="k">SELECT</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">ST_Relate</span><span class="p">(</span><span class="n">ST_Polygon</span><span class="p">(</span><span class="n">rast</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span><span class="n">ST_Polygon</span><span class="p">(</span><span class="n">rast</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="s1">&#39;T*T***FF*&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="s-oracle">
<span id="oracle"></span><h4>Oracle<a class="headerlink" href="#oracle" title="永久链接至标题">¶</a></h4>
<p>这里的关系模式由以下至少一个九个关系字符串组成：<code class="docutils literal notranslate"><span class="pre">TOUCH</span></code>、<code class="docutils literal notranslate"><span class="pre">OVERLAPBDYDISJOINT</span></code>、<code class="docutils literal notranslate"><span class="pre">OVERLAPBDYINTERSECT</span></code>、<code class="docutils literal notranslate"><span class="pre">EQUAL</span></code>、<code class="docutils literal notranslate"><span class="pre">INSIDE</span></code>、<code class="docutils literal notranslate"><span class="pre">COVEREDBY</span></code>、<code class="docutils literal notranslate"><span class="pre">CONTAINS</span></code>、<code class="docutils literal notranslate"><span class="pre">COVERS</span></code>、<code class="docutils literal notranslate"><span class="pre">ON</span></code> 和 <code class="docutils literal notranslate"><span class="pre">ANYINTERACT</span></code>。多个字符串可以用逻辑布尔运算符 OR 组合，例如 <code class="docutils literal notranslate"><span class="pre">'inside+touch'</span></code>。这些关系字符串不区分大小写。 <a class="footnote-reference" href="#fnsdorelate" id="id5">[2]</a></p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__relate</span><span class="o">=</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="s2">&quot;anyinteract&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Oracle 的 SQL 等效方式：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">SDO_RELATE</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span><span class="w"> </span><span class="n">geom</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;anyinteract&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="s-touches">
<span id="s-std-fieldlookup-touches"></span><span id="s-std:fieldlookup-touches"></span><span id="touches"></span><span id="std-fieldlookup-touches"></span><span id="std:fieldlookup-touches"></span><h3><code class="docutils literal notranslate"><span class="pre">touches</span></code><a class="headerlink" href="#touches" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Touches.html">PostGIS</a>, Oracle, MariaDB, MySQL, SpatiaLite</p>
<p>测试几何字段是否在空间上与查找几何接触。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__touches</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Touches(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>MariaDB</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Touches(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>MySQL</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Touches(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>Oracle</td>
<td><code class="docutils literal notranslate"><span class="pre">SDO_TOUCH(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">Touches(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-within">
<span id="s-std-fieldlookup-within"></span><span id="s-std:fieldlookup-within"></span><span id="within"></span><span id="std-fieldlookup-within"></span><span id="std:fieldlookup-within"></span><h3><code class="docutils literal notranslate"><span class="pre">within</span></code><a class="headerlink" href="#within" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Within.html">PostGIS</a>, Oracle, MariaDB, MySQL, SpatiaLite, PGRaster (Bilateral)</p>
<p>测试几何字段是否在空间上位于查找几何内部。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__within</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Within(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>MariaDB</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Within(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>MySQL</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Within(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-odd"><td>Oracle</td>
<td><code class="docutils literal notranslate"><span class="pre">SDO_INSIDE(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
<tr class="row-even"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">Within(poly,</span> <span class="pre">geom)</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-left">
<span id="s-std-fieldlookup-left"></span><span id="s-std:fieldlookup-left"></span><span id="left"></span><span id="std-fieldlookup-left"></span><span id="std:fieldlookup-left"></span><h3><code class="docutils literal notranslate"><span class="pre">left</span></code><a class="headerlink" href="#left" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Geometry_Left.html">PostGIS</a>, PGRaster (Conversion)</p>
<p>测试几何字段的边界框是否严格位于查找几何的边界框左侧。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__left</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<p>PostGIS 等效方式：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">poly</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">geom</span>
</pre></div>
</div>
</div>
<div class="section" id="s-right">
<span id="s-std-fieldlookup-right"></span><span id="s-std:fieldlookup-right"></span><span id="right"></span><span id="std-fieldlookup-right"></span><span id="std:fieldlookup-right"></span><h3><code class="docutils literal notranslate"><span class="pre">right</span></code><a class="headerlink" href="#right" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Geometry_Right.html">PostGIS</a>, PGRaster (Conversion)</p>
<p>测试几何字段的边界框是否严格位于查找几何的边界框右侧。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__right</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<p>PostGIS 等效方式：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">poly</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">geom</span>
</pre></div>
</div>
</div>
<div class="section" id="s-overlaps-left">
<span id="s-std-fieldlookup-overlaps_left"></span><span id="s-std:fieldlookup-overlaps_left"></span><span id="overlaps-left"></span><span id="std-fieldlookup-overlaps_left"></span><span id="std:fieldlookup-overlaps_left"></span><h3><code class="docutils literal notranslate"><span class="pre">overlaps_left</span></code><a class="headerlink" href="#overlaps-left" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Geometry_Overleft.html">PostGIS</a>, PGRaster (Bilateral)</p>
<p>测试几何字段的边界框是否与查找几何的边界框重叠或位于其左侧。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__overlaps_left</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<p>PostGIS 等效方式：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">poly</span><span class="w"> </span><span class="o">&amp;&lt;</span><span class="w"> </span><span class="n">geom</span>
</pre></div>
</div>
</div>
<div class="section" id="s-overlaps-right">
<span id="s-std-fieldlookup-overlaps_right"></span><span id="s-std:fieldlookup-overlaps_right"></span><span id="overlaps-right"></span><span id="std-fieldlookup-overlaps_right"></span><span id="std:fieldlookup-overlaps_right"></span><h3><code class="docutils literal notranslate"><span class="pre">overlaps_right</span></code><a class="headerlink" href="#overlaps-right" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Geometry_Overright.html">PostGIS</a>, PGRaster (Bilateral)</p>
<p>测试几何字段的边界框是否与查找几何的边界框重叠或位于其右侧。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__overlaps_right</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<p>PostGIS 等效方式：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">poly</span><span class="w"> </span><span class="o">&amp;&gt;</span><span class="w"> </span><span class="n">geom</span>
</pre></div>
</div>
</div>
<div class="section" id="s-overlaps-above">
<span id="s-std-fieldlookup-overlaps_above"></span><span id="s-std:fieldlookup-overlaps_above"></span><span id="overlaps-above"></span><span id="std-fieldlookup-overlaps_above"></span><span id="std:fieldlookup-overlaps_above"></span><h3><code class="docutils literal notranslate"><span class="pre">overlaps_above</span></code><a class="headerlink" href="#overlaps-above" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Geometry_Overabove.html">PostGIS</a>, PGRaster (Conversion)</p>
<p>测试几何字段的边界框是否与查找几何的边界框重叠或位于其上方。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__overlaps_above</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<p>PostGIS 等效方式：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">poly</span><span class="w"> </span><span class="o">|&amp;&gt;</span><span class="w"> </span><span class="n">geom</span>
</pre></div>
</div>
</div>
<div class="section" id="s-overlaps-below">
<span id="s-std-fieldlookup-overlaps_below"></span><span id="s-std:fieldlookup-overlaps_below"></span><span id="overlaps-below"></span><span id="std-fieldlookup-overlaps_below"></span><span id="std:fieldlookup-overlaps_below"></span><h3><code class="docutils literal notranslate"><span class="pre">overlaps_below</span></code><a class="headerlink" href="#overlaps-below" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Geometry_Overbelow.html">PostGIS</a>, PGRaster (Conversion)</p>
<p>测试几何字段的边界框是否与查找几何的边界框重叠或位于其下方。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__overlaps_below</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<p>PostGIS 等效方式：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">poly</span><span class="w"> </span><span class="o">&amp;&lt;|</span><span class="w"> </span><span class="n">geom</span>
</pre></div>
</div>
</div>
<div class="section" id="s-strictly-above">
<span id="s-std-fieldlookup-strictly_above"></span><span id="s-std:fieldlookup-strictly_above"></span><span id="strictly-above"></span><span id="std-fieldlookup-strictly_above"></span><span id="std:fieldlookup-strictly_above"></span><h3><code class="docutils literal notranslate"><span class="pre">strictly_above</span></code><a class="headerlink" href="#strictly-above" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Geometry_Above.html">PostGIS</a>, PGRaster (Conversion)</p>
<p>测试几何字段的边界框是否严格位于查找几何的边界框上方。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__strictly_above</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<p>PostGIS 等效方式：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">poly</span><span class="w"> </span><span class="o">|&gt;&gt;</span><span class="w"> </span><span class="n">geom</span>
</pre></div>
</div>
</div>
<div class="section" id="s-strictly-below">
<span id="s-std-fieldlookup-strictly_below"></span><span id="s-std:fieldlookup-strictly_below"></span><span id="strictly-below"></span><span id="std-fieldlookup-strictly_below"></span><span id="std:fieldlookup-strictly_below"></span><h3><code class="docutils literal notranslate"><span class="pre">strictly_below</span></code><a class="headerlink" href="#strictly-below" title="永久链接至标题">¶</a></h3>
<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Geometry_Below.html">PostGIS</a>, PGRaster (Conversion)</p>
<p>测试几何字段的边界框是否严格位于查找几何的边界框下方。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__strictly_below</span><span class="o">=</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<p>PostGIS 等效方式：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">poly</span><span class="w"> </span><span class="o">&lt;&lt;|</span><span class="w"> </span><span class="n">geom</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="s-distance-lookups">
<span id="s-id6"></span><span id="distance-lookups"></span><span id="id6"></span><h2>距离查找<a class="headerlink" href="#distance-lookups" title="永久链接至标题">¶</a></h2>
<p><em>可用性</em>: PostGIS, Oracle, MariaDB, MySQL, SpatiaLite, PGRaster (Native)</p>
<p>有关执行距离查询的概述，请参见 <a class="reference internal" href="db-api.html#distance-queries"><span class="std std-ref">距离查询介绍</span></a>。</p>
<p>距离查找具有以下形式：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;field&gt;__&lt;distance lookup&gt;=(&lt;geometry/raster&gt;, &lt;distance value&gt;[, &quot;spheroid&quot;])
&lt;field&gt;__&lt;distance lookup&gt;=(&lt;raster&gt;, &lt;band_index&gt;, &lt;distance value&gt;[, &quot;spheroid&quot;])
&lt;field&gt;__&lt;band_index&gt;__&lt;distance lookup&gt;=(&lt;raster&gt;, &lt;band_index&gt;, &lt;distance value&gt;[, &quot;spheroid&quot;])
</pre></div>
</div>
<p>传递给距离查找的值是一个元组；前两个值是必需的，分别是要计算距离的几何对象和距离值（可以是字段单位的数字、一个 <a class="reference internal" href="measure.html#django.contrib.gis.measure.Distance" title="django.contrib.gis.measure.Distance"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distance</span></code></a> 对象或一个 <a class="reference internal" href="../../models/expressions.html"><span class="doc">查询表达式</span></a>）。要传递一个波段索引给查找，可以使用一个包含三个元素的元组，其中第二个条目是波段索引。</p>
<p>在除了 <a class="reference internal" href="#std-fieldlookup-dwithin"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">dwithin</span></code></a> 之外的每个距离查找中，都可以包含一个可选元素 <code class="docutils literal notranslate"><span class="pre">'spheroid'</span></code>，以便在具有大地测量坐标系统的字段上使用更准确的大地测量距离计算函数。</p>
<p>在 PostgreSQL 上，<code class="docutils literal notranslate"><span class="pre">'spheroid'</span></code> 选项使用 <a class="reference external" href="https://postgis.net/docs/ST_Distance_Spheroid.html">ST_DistanceSpheroid</a> 而不是 <a class="reference external" href="https://postgis.net/docs/ST_DistanceSphere.html">ST_DistanceSphere</a>。对于投影坐标系统，将使用更简单的 <a class="reference external" href="https://postgis.net/docs/ST_Distance.html">ST_Distance</a> 函数。对于基于椭球体的查找，栅格将被转换为几何对象。</p>
<div class="section" id="s-distance-gt">
<span id="s-std-fieldlookup-distance_gt"></span><span id="s-std:fieldlookup-distance_gt"></span><span id="distance-gt"></span><span id="std-fieldlookup-distance_gt"></span><span id="std:fieldlookup-distance_gt"></span><h3><code class="docutils literal notranslate"><span class="pre">distance_gt</span></code><a class="headerlink" href="#distance-gt" title="永久链接至标题">¶</a></h3>
<p>返回距离几何字段到查找几何的距离大于给定距离值的模型。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__distance_gt</span><span class="o">=</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="n">D</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">5</span><span class="p">)))</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Distance/ST_Distance_Sphere(poly,</span> <span class="pre">geom)</span> <span class="pre">&gt;</span> <span class="pre">5</span></code></td>
</tr>
<tr class="row-odd"><td>MariaDB</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Distance(poly,</span> <span class="pre">geom)</span> <span class="pre">&gt;</span> <span class="pre">5</span></code></td>
</tr>
<tr class="row-even"><td>MySQL</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Distance(poly,</span> <span class="pre">geom)</span> <span class="pre">&gt;</span> <span class="pre">5</span></code></td>
</tr>
<tr class="row-odd"><td>Oracle</td>
<td><code class="docutils literal notranslate"><span class="pre">SDO_GEOM.SDO_DISTANCE(poly,</span> <span class="pre">geom,</span> <span class="pre">0.05)</span> <span class="pre">&gt;</span> <span class="pre">5</span></code></td>
</tr>
<tr class="row-even"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">Distance(poly,</span> <span class="pre">geom)</span> <span class="pre">&gt;</span> <span class="pre">5</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-distance-gte">
<span id="s-std-fieldlookup-distance_gte"></span><span id="s-std:fieldlookup-distance_gte"></span><span id="distance-gte"></span><span id="std-fieldlookup-distance_gte"></span><span id="std:fieldlookup-distance_gte"></span><h3><code class="docutils literal notranslate"><span class="pre">distance_gte</span></code><a class="headerlink" href="#distance-gte" title="永久链接至标题">¶</a></h3>
<p>返回距离几何字段到查找几何的距离大于或等于给定距离值的模型。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__distance_gte</span><span class="o">=</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="n">D</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">5</span><span class="p">)))</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Distance/ST_Distance_Sphere(poly,</span> <span class="pre">geom)</span> <span class="pre">&gt;=</span> <span class="pre">5</span></code></td>
</tr>
<tr class="row-odd"><td>MariaDB</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Distance(poly,</span> <span class="pre">geom)</span> <span class="pre">&gt;=</span> <span class="pre">5</span></code></td>
</tr>
<tr class="row-even"><td>MySQL</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Distance(poly,</span> <span class="pre">geom)</span> <span class="pre">&gt;=</span> <span class="pre">5</span></code></td>
</tr>
<tr class="row-odd"><td>Oracle</td>
<td><code class="docutils literal notranslate"><span class="pre">SDO_GEOM.SDO_DISTANCE(poly,</span> <span class="pre">geom,</span> <span class="pre">0.05)</span> <span class="pre">&gt;=</span> <span class="pre">5</span></code></td>
</tr>
<tr class="row-even"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">Distance(poly,</span> <span class="pre">geom)</span> <span class="pre">&gt;=</span> <span class="pre">5</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-distance-lt">
<span id="s-std-fieldlookup-distance_lt"></span><span id="s-std:fieldlookup-distance_lt"></span><span id="distance-lt"></span><span id="std-fieldlookup-distance_lt"></span><span id="std:fieldlookup-distance_lt"></span><h3><code class="docutils literal notranslate"><span class="pre">distance_lt</span></code><a class="headerlink" href="#distance-lt" title="永久链接至标题">¶</a></h3>
<p>返回距离几何字段到查找几何的距离小于给定距离值的模型。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__distance_lt</span><span class="o">=</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="n">D</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">5</span><span class="p">)))</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Distance/ST_Distance_Sphere(poly,</span> <span class="pre">geom)</span> <span class="pre">&lt;</span> <span class="pre">5</span></code></td>
</tr>
<tr class="row-odd"><td>MariaDB</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Distance(poly,</span> <span class="pre">geom)</span> <span class="pre">&lt;</span> <span class="pre">5</span></code></td>
</tr>
<tr class="row-even"><td>MySQL</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Distance(poly,</span> <span class="pre">geom)</span> <span class="pre">&lt;</span> <span class="pre">5</span></code></td>
</tr>
<tr class="row-odd"><td>Oracle</td>
<td><code class="docutils literal notranslate"><span class="pre">SDO_GEOM.SDO_DISTANCE(poly,</span> <span class="pre">geom,</span> <span class="pre">0.05)</span> <span class="pre">&lt;</span> <span class="pre">5</span></code></td>
</tr>
<tr class="row-even"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">Distance(poly,</span> <span class="pre">geom)</span> <span class="pre">&lt;</span> <span class="pre">5</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-distance-lte">
<span id="s-std-fieldlookup-distance_lte"></span><span id="s-std:fieldlookup-distance_lte"></span><span id="distance-lte"></span><span id="std-fieldlookup-distance_lte"></span><span id="std:fieldlookup-distance_lte"></span><h3><code class="docutils literal notranslate"><span class="pre">distance_lte</span></code><a class="headerlink" href="#distance-lte" title="永久链接至标题">¶</a></h3>
<p>返回距离几何字段到查找几何的距离小于或等于给定距离值的模型。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__distance_lte</span><span class="o">=</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="n">D</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">5</span><span class="p">)))</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Distance/ST_Distance_Sphere(poly,</span> <span class="pre">geom)</span> <span class="pre">&lt;=</span> <span class="pre">5</span></code></td>
</tr>
<tr class="row-odd"><td>MariaDB</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Distance(poly,</span> <span class="pre">geom)</span> <span class="pre">&lt;=</span> <span class="pre">5</span></code></td>
</tr>
<tr class="row-even"><td>MySQL</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_Distance(poly,</span> <span class="pre">geom)</span> <span class="pre">&lt;=</span> <span class="pre">5</span></code></td>
</tr>
<tr class="row-odd"><td>Oracle</td>
<td><code class="docutils literal notranslate"><span class="pre">SDO_GEOM.SDO_DISTANCE(poly,</span> <span class="pre">geom,</span> <span class="pre">0.05)</span> <span class="pre">&lt;=</span> <span class="pre">5</span></code></td>
</tr>
<tr class="row-even"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">Distance(poly,</span> <span class="pre">geom)</span> <span class="pre">&lt;=</span> <span class="pre">5</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-dwithin">
<span id="s-std-fieldlookup-dwithin"></span><span id="s-std:fieldlookup-dwithin"></span><span id="dwithin"></span><span id="std-fieldlookup-dwithin"></span><span id="std:fieldlookup-dwithin"></span><h3><code class="docutils literal notranslate"><span class="pre">dwithin</span></code><a class="headerlink" href="#dwithin" title="永久链接至标题">¶</a></h3>
<p>返回距离几何字段到查找几何的距离在给定距离内的模型。请注意，如果目标几何对象位于投影坐标系统中，您只能提供 <a class="reference internal" href="measure.html#django.contrib.gis.measure.Distance" title="django.contrib.gis.measure.Distance"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distance</span></code></a> 对象。对于地理几何对象，您应该使用几何字段的单位（例如，对于 <code class="docutils literal notranslate"><span class="pre">WGS84</span></code> 使用度）。</p>
<p>举例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__dwithin</span><span class="o">=</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="n">D</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">5</span><span class="p">)))</span>
</pre></div>
</div>
<table class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">后端</th>
<th class="head">SQL 等效方式</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostGIS</td>
<td><code class="docutils literal notranslate"><span class="pre">ST_DWithin(poly,</span> <span class="pre">geom,</span> <span class="pre">5)</span></code></td>
</tr>
<tr class="row-odd"><td>Oracle</td>
<td><code class="docutils literal notranslate"><span class="pre">SDO_WITHIN_DISTANCE(poly,</span> <span class="pre">geom,</span> <span class="pre">5)</span></code></td>
</tr>
<tr class="row-even"><td>SpatiaLite</td>
<td><code class="docutils literal notranslate"><span class="pre">PtDistWithin(poly,</span> <span class="pre">geom,</span> <span class="pre">5)</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-aggregate-functions">
<span id="s-gis-aggregation-functions"></span><span id="aggregate-functions"></span><span id="gis-aggregation-functions"></span><h3>聚合函数<a class="headerlink" href="#aggregate-functions" title="永久链接至标题">¶</a></h3>
<p>Django 提供了一些与地理信息系统 (GIS) 相关的聚合函数。有关如何使用这些聚合函数的详细信息，请参阅 <a class="reference internal" href="../../../topics/db/aggregation.html"><span class="doc">有关聚合的主题指南</span></a>。</p>
<table class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">关键字参数</th>
<th class="head">描述</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">tolerance</span></code></td>
<td>这个关键字仅适用于 Oracle。它用于 <code class="docutils literal notranslate"><span class="pre">SDOAGGRTYPE</span></code> 过程使用的容差值；有关更多详细信息，请参阅 <a class="reference external" href="https://docs.oracle.com/en/database/oracle/oracle-database/21/spatl/spatial-concepts.html#GUID-CE10AB14-D5EA-43BA-A647-DAC9EEF41EE6">Oracle 文档</a>。</td>
</tr>
</tbody>
</table>
<p>例如：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.contrib.gis.db.models</span> <span class="kn">import</span> <span class="n">Extent</span><span class="p">,</span> <span class="n">Union</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">WorldBorder</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">Extent</span><span class="p">(</span><span class="s2">&quot;mpoly&quot;</span><span class="p">),</span> <span class="n">Union</span><span class="p">(</span><span class="s2">&quot;mpoly&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="section" id="s-collect">
<span id="collect"></span><h4><code class="docutils literal notranslate"><span class="pre">Collect</span></code><a class="headerlink" href="#collect" title="永久链接至标题">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.Collect">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Collect</span></code>(<em><span class="n"><span class="pre">geo_field</span></span></em>, <em><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.Collect" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Collect.html">PostGIS</a>, SpatiaLite</p>
<p>从几何列返回一个 <code class="docutils literal notranslate"><span class="pre">GEOMETRYCOLLECTION</span></code> 或 <code class="docutils literal notranslate"><span class="pre">MULTI</span></code> 几何对象。这类似于简化版本的 <a class="reference internal" href="#django.contrib.gis.db.models.Union" title="django.contrib.gis.db.models.Union"><code class="xref py py-class docutils literal notranslate"><span class="pre">Union</span></code></a> 聚合，但它可以比执行联合操作快几个数量级，因为它将几何对象汇总到一个集合或多重对象中，而不关心边界的消解。</p>
<div class="versionchanged">
<span class="title">Changed in Django 5.0:</span> <p>已添加对 <code class="docutils literal notranslate"><span class="pre">filter</span></code> 参数的支持。</p>
</div>
</div>
<div class="section" id="s-extent">
<span id="extent"></span><h4><code class="docutils literal notranslate"><span class="pre">Extent</span></code><a class="headerlink" href="#extent" title="永久链接至标题">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.Extent">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Extent</span></code>(<em><span class="n"><span class="pre">geo_field</span></span></em>, <em><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.Extent" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Extent.html">PostGIS</a>, Oracle, SpatiaLite</p>
<p>返回 <code class="docutils literal notranslate"><span class="pre">QuerySet</span></code> 中所有 <code class="docutils literal notranslate"><span class="pre">geo_field</span></code> 的范围，以一个包括左下坐标和右上坐标的 4-元组表示。</p>
<p>例如：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">qs</span> <span class="o">=</span> <span class="n">City</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name__in</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Houston&quot;</span><span class="p">,</span> <span class="s2">&quot;Dallas&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">Extent</span><span class="p">(</span><span class="s2">&quot;poly&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">qs</span><span class="p">[</span><span class="s2">&quot;poly__extent&quot;</span><span class="p">])</span>
<span class="go">(-96.8016128540039, 29.7633724212646, -95.3631439208984, 32.782058715820)</span>
</pre></div>
</div>
<div class="versionchanged">
<span class="title">Changed in Django 5.0:</span> <p>已添加对 <code class="docutils literal notranslate"><span class="pre">filter</span></code> 参数的支持。</p>
</div>
</div>
<div class="section" id="s-extent3d">
<span id="extent3d"></span><h4><code class="docutils literal notranslate"><span class="pre">Extent3D</span></code><a class="headerlink" href="#extent3d" title="永久链接至标题">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.Extent3D">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Extent3D</span></code>(<em><span class="n"><span class="pre">geo_field</span></span></em>, <em><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.Extent3D" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_3DExtent.html">PostGIS</a></p>
<p>返回 <code class="docutils literal notranslate"><span class="pre">QuerySet</span></code> 中所有 <code class="docutils literal notranslate"><span class="pre">geo_field</span></code> 的 3D 范围，以一个包括左下坐标和右上坐标的 6-元组表示（每个坐标包含 x、y 和 z 坐标）。</p>
<p>例如：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">qs</span> <span class="o">=</span> <span class="n">City</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name__in</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Houston&quot;</span><span class="p">,</span> <span class="s2">&quot;Dallas&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">Extent3D</span><span class="p">(</span><span class="s2">&quot;poly&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">qs</span><span class="p">[</span><span class="s2">&quot;poly__extent3d&quot;</span><span class="p">])</span>
<span class="go">(-96.8016128540039, 29.7633724212646, 0, -95.3631439208984, 32.782058715820, 0)</span>
</pre></div>
</div>
<div class="versionchanged">
<span class="title">Changed in Django 5.0:</span> <p>已添加对 <code class="docutils literal notranslate"><span class="pre">filter</span></code> 参数的支持。</p>
</div>
</div>
<div class="section" id="s-makeline">
<span id="makeline"></span><h4><code class="docutils literal notranslate"><span class="pre">MakeLine</span></code><a class="headerlink" href="#makeline" title="永久链接至标题">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.MakeLine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">MakeLine</span></code>(<em><span class="n"><span class="pre">geo_field</span></span></em>, <em><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.MakeLine" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_MakeLine.html">PostGIS</a>, SpatiaLite</p>
<p>从 <code class="docutils literal notranslate"><span class="pre">QuerySet</span></code> 中的点字段几何构造一个 <code class="docutils literal notranslate"><span class="pre">LineString</span></code>。目前，对查询集进行排序不会产生影响。</p>
<p>例如：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">qs</span> <span class="o">=</span> <span class="n">City</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name__in</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Houston&quot;</span><span class="p">,</span> <span class="s2">&quot;Dallas&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">MakeLine</span><span class="p">(</span><span class="s2">&quot;poly&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">qs</span><span class="p">[</span><span class="s2">&quot;poly__makeline&quot;</span><span class="p">])</span>
<span class="go">LINESTRING (-95.3631510000000020 29.7633739999999989, -96.8016109999999941 32.7820570000000018)</span>
</pre></div>
</div>
<div class="versionchanged">
<span class="title">Changed in Django 5.0:</span> <p>已添加对 <code class="docutils literal notranslate"><span class="pre">filter</span></code> 参数的支持。</p>
</div>
</div>
<div class="section" id="s-union">
<span id="union"></span><h4><code class="docutils literal notranslate"><span class="pre">Union</span></code><a class="headerlink" href="#union" title="永久链接至标题">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.Union">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">Union</span></code>(<em><span class="n"><span class="pre">geo_field</span></span></em>, <em><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>)<a class="headerlink" href="#django.contrib.gis.db.models.Union" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p><em>可用性</em>: <a class="reference external" href="https://postgis.net/docs/ST_Union.html">PostGIS</a>, Oracle, SpatiaLite</p>
<p>这个方法返回一个包含查询集中每个几何对象联合的 <a class="reference internal" href="geos.html#django.contrib.gis.geos.GEOSGeometry" title="django.contrib.gis.geos.GEOSGeometry"><code class="xref py py-class docutils literal notranslate"><span class="pre">GEOSGeometry</span></code></a> 对象。请注意，使用 <code class="docutils literal notranslate"><span class="pre">Union</span></code> 是处理器密集型的操作，在大型查询集上可能需要较长时间。</p>
<div class="admonition note">
<p class="first admonition-title">备注</p>
<p class="last">如果使用这个方法的计算时间太昂贵，可以考虑使用 <a class="reference internal" href="#django.contrib.gis.db.models.Collect" title="django.contrib.gis.db.models.Collect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Collect</span></code></a> 代替。</p>
</div>
<p>例如：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">Union</span><span class="p">(</span><span class="n">poly</span><span class="p">))</span>  <span class="c1"># This may take a long time.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">poly__within</span><span class="o">=</span><span class="n">bbox</span><span class="p">)</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">Union</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>  <span class="c1"># A more sensible approach.</span>
</pre></div>
</div>
<div class="versionchanged">
<span class="title">Changed in Django 5.0:</span> <p>已添加对 <code class="docutils literal notranslate"><span class="pre">filter</span></code> 参数的支持。</p>
</div>
<p class="rubric">脚注</p>
<table class="docutils footnote" frame="void" id="fnde9im" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[1]</a></td><td><em>查看</em> <a class="reference external" href="https://portal.ogc.org/files/?artifact_id=829">OpenGIS Simple Feature Specification For SQL</a>，第 2.1.13.2 章，第 2-13 页（维度扩展九交叉模型）。</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="fnsdorelate" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[2]</a></td><td><em>查看</em> <a class="reference external" href="https://docs.oracle.com/en/database/oracle/oracle-database/18/spatl/spatial-operators-reference.html#GUID-97C17C18-F05E-49B4-BE11-E89B972E2A02">SDO_RELATE 文档</a>，来自 Oracle Spatial and Graph Developer's Guide。</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="fncovers" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[3]</td><td><em>(<a class="fn-backref" href="#id2">1</a>, <a class="fn-backref" href="#id3">2</a>)</em> 要了解这个例程的解释，请阅读由 Martin Davis（PostGIS 开发人员）编写的文章 <a class="reference external" href="https://lin-ear-th-inking.blogspot.com/2007/06/subtleties-of-ogc-covers-spatial.html">Quirks of the &quot;Contains&quot; Spatial Predicate</a>。</td></tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../../contents.html">目录</a></h3>
    <ul>
<li><a class="reference internal" href="#">GIS QuerySet API 参考</a><ul>
<li><a class="reference internal" href="#spatial-lookups">空间查找</a><ul>
<li><a class="reference internal" href="#lookups-with-rasters">栅格查找方式</a></li>
<li><a class="reference internal" href="#bbcontains"><code class="docutils literal notranslate"><span class="pre">bbcontains</span></code></a></li>
<li><a class="reference internal" href="#bboverlaps"><code class="docutils literal notranslate"><span class="pre">bboverlaps</span></code></a></li>
<li><a class="reference internal" href="#contained"><code class="docutils literal notranslate"><span class="pre">contained</span></code></a></li>
<li><a class="reference internal" href="#contains"><code class="docutils literal notranslate"><span class="pre">contains</span></code></a></li>
<li><a class="reference internal" href="#contains-properly"><code class="docutils literal notranslate"><span class="pre">contains_properly</span></code></a></li>
<li><a class="reference internal" href="#coveredby"><code class="docutils literal notranslate"><span class="pre">coveredby</span></code></a></li>
<li><a class="reference internal" href="#covers"><code class="docutils literal notranslate"><span class="pre">covers</span></code></a></li>
<li><a class="reference internal" href="#crosses"><code class="docutils literal notranslate"><span class="pre">crosses</span></code></a></li>
<li><a class="reference internal" href="#disjoint"><code class="docutils literal notranslate"><span class="pre">disjoint</span></code></a></li>
<li><a class="reference internal" href="#equals"><code class="docutils literal notranslate"><span class="pre">equals</span></code></a></li>
<li><a class="reference internal" href="#exact-same-as"><code class="docutils literal notranslate"><span class="pre">exact</span></code>, <code class="docutils literal notranslate"><span class="pre">same_as</span></code></a></li>
<li><a class="reference internal" href="#intersects"><code class="docutils literal notranslate"><span class="pre">intersects</span></code></a></li>
<li><a class="reference internal" href="#isempty"><code class="docutils literal notranslate"><span class="pre">isempty</span></code></a></li>
<li><a class="reference internal" href="#isvalid"><code class="docutils literal notranslate"><span class="pre">isvalid</span></code></a></li>
<li><a class="reference internal" href="#overlaps"><code class="docutils literal notranslate"><span class="pre">overlaps</span></code></a></li>
<li><a class="reference internal" href="#relate"><code class="docutils literal notranslate"><span class="pre">relate</span></code></a><ul>
<li><a class="reference internal" href="#mariadb-postgis-and-spatialite">MariaDB、PostGIS  和 SpatiaLite</a></li>
<li><a class="reference internal" href="#oracle">Oracle</a></li>
</ul>
</li>
<li><a class="reference internal" href="#touches"><code class="docutils literal notranslate"><span class="pre">touches</span></code></a></li>
<li><a class="reference internal" href="#within"><code class="docutils literal notranslate"><span class="pre">within</span></code></a></li>
<li><a class="reference internal" href="#left"><code class="docutils literal notranslate"><span class="pre">left</span></code></a></li>
<li><a class="reference internal" href="#right"><code class="docutils literal notranslate"><span class="pre">right</span></code></a></li>
<li><a class="reference internal" href="#overlaps-left"><code class="docutils literal notranslate"><span class="pre">overlaps_left</span></code></a></li>
<li><a class="reference internal" href="#overlaps-right"><code class="docutils literal notranslate"><span class="pre">overlaps_right</span></code></a></li>
<li><a class="reference internal" href="#overlaps-above"><code class="docutils literal notranslate"><span class="pre">overlaps_above</span></code></a></li>
<li><a class="reference internal" href="#overlaps-below"><code class="docutils literal notranslate"><span class="pre">overlaps_below</span></code></a></li>
<li><a class="reference internal" href="#strictly-above"><code class="docutils literal notranslate"><span class="pre">strictly_above</span></code></a></li>
<li><a class="reference internal" href="#strictly-below"><code class="docutils literal notranslate"><span class="pre">strictly_below</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#distance-lookups">距离查找</a><ul>
<li><a class="reference internal" href="#distance-gt"><code class="docutils literal notranslate"><span class="pre">distance_gt</span></code></a></li>
<li><a class="reference internal" href="#distance-gte"><code class="docutils literal notranslate"><span class="pre">distance_gte</span></code></a></li>
<li><a class="reference internal" href="#distance-lt"><code class="docutils literal notranslate"><span class="pre">distance_lt</span></code></a></li>
<li><a class="reference internal" href="#distance-lte"><code class="docutils literal notranslate"><span class="pre">distance_lte</span></code></a></li>
<li><a class="reference internal" href="#dwithin"><code class="docutils literal notranslate"><span class="pre">dwithin</span></code></a></li>
<li><a class="reference internal" href="#aggregate-functions">聚合函数</a><ul>
<li><a class="reference internal" href="#collect"><code class="docutils literal notranslate"><span class="pre">Collect</span></code></a></li>
<li><a class="reference internal" href="#extent"><code class="docutils literal notranslate"><span class="pre">Extent</span></code></a></li>
<li><a class="reference internal" href="#extent3d"><code class="docutils literal notranslate"><span class="pre">Extent3D</span></code></a></li>
<li><a class="reference internal" href="#makeline"><code class="docutils literal notranslate"><span class="pre">MakeLine</span></code></a></li>
<li><a class="reference internal" href="#union"><code class="docutils literal notranslate"><span class="pre">Union</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>上一个主题</h4>
    <p class="topless"><a href="forms-api.html"
                          title="上一章">GeoDjango 表单 API</a></p>
  </div>
  <div>
    <h4>下一个主题</h4>
    <p class="topless"><a href="functions.html"
                          title="下一章">地理数据库函数</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/ref/contrib/gis/geoquerysets.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">3月 29, 2024</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="forms-api.html" title="GeoDjango 表单 API">previous</a>
     |
    <a href="../../index.html" title="API 参考" accesskey="U">up</a>
   |
    <a href="functions.html" title="地理数据库函数">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>